# CAUTION

This file was designed to contain elements to be read by an update script ([ConfigFile_updater.html](https://retroapplejs.github.io//tools/ConfigFile_updater.html)), which  
* converts all relevant markdown (.md) files to HTML format  
* converts all the default configuration settings here below into JSON structures  

And outputs all this data into a single JavaScript include file ([COM_CONFIG.js](../res/COM_CONFIG.js))  
Any change in this document affects the **default application configuration**, or ultimately may cause [ConfigFile_updater.html](../tools/ConfigFile_updater.html) dysfunction !

# HOW DOES IT WORK ?

** TODO: ** read from CONFIG.md instead (not Readme.md) !!! 

This tool gathers all configuration information and documentation, and packs all data together in one config file.

![schema](https://www.plantuml.com/plantuml/png/fPDHJy8m4CVVzodkoK0Q8FXe3077G1-GH5wDfAv3fbsxi0urdj_To1XpSYMhtilQIt-z__zw6sQ6RqoUI4_4XdCFdABNgGLhW6VlAYpNE8tDTVvus9x0MUSe1WoAQ81VK5Ss5uzKxYuOZMT1Dn4G1i44NN5W_weEoAM4lrV7bSwLW5ZjjkvuvTuTPwpmll_ItlT7oluGToAYPojPJHOwakCeUp4wFIBNngGP81QB4v8VICcjVhiet3hl35IxOSS8uG0_sPRK8PUmYLBTjimvRFUVxTQpZp_Lw4EEiT_FX10h4RrrroQH5kqOzaTNzD-9j0XME-9hjOgV9h6CbXOQlqSVFiHdcHRwLKdD1THwRwFz-MpfpsydDzFkSuQNbGw4F1NSH9kTFGjDF0_fYUmvxRlgsdZkBohbpGC1pg3mj72dxskgUjumKY9Fv1S0)

We aim to have all the documentation available in markdown format, for easy online access and editing in GitHub.  This tool is designed to read all the markdown documentation available online (from GitHub) in this project, and compile a JavaScript include file that would provide a perfect copy of all the available documentation and configuration options inside the IDE.  The following diagram shows how clearly the steps:

* Fetch Readme.me file from GitHub
* extract all \*.md file links located in /docs
* fetch all listed .md files
* convert each to HTML and append to JavaScript file
* preview
* download the JavaScript file
* overwite file in /res folder.


        <div style=width:800px>
        ┌──────────┐          ┌────┐ ┌───────────┐       ┌──────────────────┐
        │Readme.md │          │*.md│ │Showdown.js│       │ COM_markdown.css │
        └────┬─────┘          └─┬──┘ └─────┬─────┘       └────────┬─────────┘
             │XmlHttp()         |XmlHttp() │include               |include
        ┌────┴─────────┐     ┌──┴──────────┴─────┐       ┌────────┴─────────┐     ┌────────────────────┐
        │Extract *.md  │     │Read next .md file,│       | Preview/test HTML|     | Download JS file   |
        │links located ├─────┤convert to HTML &  ├───┐───┤ generated by     ├─────┤ COM_CONFIG.js      |
        │in /docs      │  ▲  │append to JS file  |   │   | JavaScript file  |     |(overwrite in /res) |
        └──────────────┘  │  └───────────────────┘   │   └──────────────────┘     └────────────────────┘
                          │    loop until done       │
                          └──────────────────────────┘
        </div>

/<ins> **!** </ins>\ mind that this tool only captures the latest version of the markdown files 2-10 min after the last edits.  This must be the time GitHub requires to update the raw files on the server.

# EMULATOR

## SYSTEMS LIST

|[SYSCODE]| Model              | CPU        | Speeds    | Display  | Keys & ROM    |
| :---:   | :----------------- | :--------- | :-------- | :------- | :------------ |
| A1      | Apple I            | 6502       | 1.023     | A1_txt   | A1_US         |
| A2      | Apple II           | 6502       | 1.023     | A2_hgr   | A1_US         |
| A2P     | Apple II Plus      | 6502       | 1.023     | A2_hgr   | A1_US         |
| A2EP    | Apple II EuroPlus  | 6502       | 1.023     | A2_hgr   | A1_US         |
| A2JP    | Apple II J-Plus    | 6502       | 1.023     | A2_hgr   | A2_JP         |
| A2B     | Bell & Howell      | 6502       | 1.023     | A2_hgr   | A1_US_blk     |
| A3      | Apple III          | 6502B      | 1.8       | A2_hgr   | A3_US         |
| A3R     | Apple III Revised  | 6502B      | 1.8       | A2_hgr   | A3_US         |
| A2e     | Apple IIe RevA     | 6502       | 1.023     | A2_hgr   | A2e_US,A2e_UK,A2e_CA,A2e_FR |
| A2e     | Apple IIe RevB     | 6502       | 1.023     | A2_hgr2  | A2e_US,A2e_UK,A2e_CA,A2e_FR |
| A2c     | Apple IIc          | 65C02      | 1.023     |          |               |
| A3P     | Apple III Plus     | 6502B      | 1.8       |          |               |
| A2eE    | Apple IIe Enhanced | 65C02      | 1.023     |          |               |
| A2GS    | Apple IIGS         | 65C816     | 2.8       |          |               |
| A2cM    | Apple IIc MemoryExp| 65C02      | 1.023     |          |               |
| A2G3    | Apple IIGS ROM3    | 65C816     | 2.8       |          |               |
| A2eP    | Apple IIe Platinum | 65C02      | 1.023     |          |               |
| A2eC    | Apple IIe Card     | 65C02      | 1.023,1.9 |          |               |


## PERIPHERALS LIST

|[PCODE]| NAME                                   | ROMrange\*      | SLOTrange    | SYSrange    | Manuals       |
| :-----: | :----------------------------------- | :-------------- | :------------|:----------- |:------------- |
| MS16K   | Microsoft 16K Language card          |                 | 0            | A2,A2P,A2E  |               | 
| DISKII  | Apple Disk II Floppy Disk Subsystem  |     $Cn00, $CnFF| 1,2,3,4,5,6,7| A2,A2P,A2E  | [user_manual](https://mirrors.apple2.org.za/Apple%20II%20Documentation%20Project/Peripherals/Disk%20Drives/Apple%20Disk%20II/Manuals/Apple%20Disk%20II%20Floppy%20Disk%20Subsystem%20-%20Installation%20and%20Operating%20Manual.pdf),[technical_manual](https://www.bigmessowires.com/2021/11/12/the-amazing-disk-ii-controller-card/) |


\* n = slot number on which the card is installed

## SLOT CONFIG

|[SLOT#] | PCODE      | DESCRIPTION       |
| :----: | :--------- | :---------------- |
|   0    | MS16K      |                   | 
|   1    |            |                   |
|   2    |            |                   |
|   3    |            |                   |
|   4    |            |                   |
|   5    |            |                   |
|   6    | DISKII     |                   |
|   7    |            |                   |

# ASSEMBLER

## TRANSPILER

|[TFUNCTION]    | COMPILER  | REGXEP_INPUT                          | REGEXP_OUTPUT    | DESCRIPTION                                      |
| :-----------: | :-------- | :------------------------------------ | :--------------- | :----------------------------------------------- |
|    .eq        | SourceGen | (^[^;]*)(\\.eq \\|\\.EQ )(.+)         | '$1EQU$3'        | Replace .eq   by EQU until ;                     |
|    .var       | SourceGen | (^[^;]*)(\\.var \\|\\.VAR )(.+)       | '$1EQU$3'        | Replace .var  by EQU until ;                     |
|    .org       | SourceGen | (^[^;]*)(\\.org \\|\\.ORG )(.+)       | '$1ORG$3'        | Replace .org  by ORG until ;                     |
|    .str       | SourceGen | (^[^;]*)(\\.str \\|\\.STR )(.+)       | '$1ASC$3'        | Replace .str  by ASC until ;                     |
|    .bulk      | SourceGen | \\x20.bulk\\x20([\\s\\S]*)$           | 'HEX '+x.split('.bulk')[1].replace(/[,$]/g,' ').replace(/\\s\\s+/g,' ').toUpperCase() | Replace .bulk by HEX, remove strings and commas|
|     +         | SourceGen | \\x20\\+\\x20([\\s\\S]*)$             | 'HEX '+x.split(' + ')[1].replace(/[,$]/g,' ').replace(/\\s\\s+/g,' ').toUpperCase() | Replace + by HEX, remove strings and commas|
|    .fill      | SourceGen | .fill\\x20([\\s\\S]*)$ | 'HEX'+(' '+x.split(',')[1].replace(/[ \\n\\$]/g,'')).toUpperCase().repeat(x.split(',')[0].replace(/[^0-9]/g,''))+' '| Substitute .fill by HEX array |
| remove {..}   | SourceGen | \\{[^{}]*\\}                          | ''               | Remove everything between accolades              |
|    *          | SourceGen | ^\\*                                  | ';*'             | Add semicolumn before any line starting with asterisk|       
| upper_before; | SourceGen | ^[^;^\n]*                             | x.toUpperCase()  | Uppercase everything until bumping into a semicolumn|


# BUILT-IN DOCUMENTATION  
[EMULATOR.md](https://github.com/RetroAppleJS/RetroAppleJS.github.io/blob/main/docs/EMULATOR.md)  
[DEBUGGER.md](https://github.com/RetroAppleJS/RetroAppleJS.github.io/blob/main/docs/DEBUGGER.md)  
[ASSEMBLER.md](https://github.com/RetroAppleJS/RetroAppleJS.github.io/blob/main/docs/ASSEMBLER.md)   
[6502.md](https://github.com/RetroAppleJS/RetroAppleJS.github.io/blob/main/docs/6502.md)  
[ZEROPAGE_APPLE2PLUS.md](https://github.com/RetroAppleJS/RetroAppleJS.github.io/blob/main/docs/ZEROPAGE_APPLE2PLUS.md)  
[PERIPHERALS.md](https://github.com/RetroAppleJS/RetroAppleJS.github.io/blob/main/docs/PERIPHERALS.md)  
[TOOLS.md](https://github.com/RetroAppleJS/RetroAppleJS.github.io/blob/main/docs/TOOLS.md) 
