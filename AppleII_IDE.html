<!DOCTYPE html>
<html><head>
<title>Apple II+ in Javascript</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="res/pure.css">
<!--link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"-->
<link rel="stylesheet" href="res/fontawesome/all.css">
<style type="text/css">

     .appvid {
	      margin-top: 85px;
        margin-left: 162px;
        padding: 0px;
        background: #222266;
        width: 560px;
        height: 384px;
     }

     .pc-tab > input,
     .pc-tab section > div {
       display: none;
     }

     #tab1:checked ~ section .tab1,
     #tab2:checked ~ section .tab2,
     #tab3:checked ~ section .tab3,
     #tab4:checked ~ section .tab4 {
       display: block;
     }

     #tab1:checked ~ nav .tab1,
     #tab2:checked ~ nav .tab2,
     #tab3:checked ~ nav .tab3,
     #tab4:checked ~ nav .tab4 {
       color: red;
     }



     .gtable {
       height:180px;
       margin-left:5px;
       font-size:xx-small;
      }
     .gtable tr { font-size:xx-small;padding:0px;margin:0px;width:20% }
     .gtable tr td {
       border:1px solid black;
       width: 9px;
       position: relative;
     }

     .gtable tr td .gt {
       position: absolute;
       visibility: hidden;
       width: 200px;
       background: #000;
       color: #fff;
       text-align: center;
       border-radius: 6px;
       padding: 5px 0px;
       z-index: 1;
       bottom: 125%;
       left: 50%;
       margin-left: -60px;
       opacity: .1;
       transition: opacity 0.3s;
     }

     .gtable tr td:hover .gt  {
       visibility: visible;
       transition: opacity 0.3s;
       opacity: 1;
     }

     .gtable tr td .gt::after {
       content: "";
       position: absolute;
       top: 100%;
       left: 60px;
       margin-left: -5px;
       border-width: 5px;
       border-style: solid;
       border-color: #555 transparent transparent transparent;
     }
</style>

<script>
  // COMMON SCRIPTS
  var _o = {"tools":{},"sys":"A2P"};
  function addLoadEvent(func)
  {
    var oldonload = window.onload;
    if (typeof window.onload != "function")
      window.onload = func;
    else
      { window.onload = function() { if (oldonload) oldonload(); func() } }
  }
</script>

</head>
<body>
<div class="pure-menu pure-menu-horizontal pc-tab">

  <input  id="tab1" type="radio" name="pct" />
  <input checked="checked" id="tab2" type="radio" name="pct" />
  <input id="tab3" type="radio" name="pct" />
  <input id="tab4" type="radio" name="pct" />


  <a href="#" class="pure-menu-heading">Apple II+</a>
  <ul class="pure-menu-list">

      <li class="pure-menu-item">
          <a href="#Assembler" class="pure-menu-link" for="tab2"><label for="tab2">Assembler</label></a>
      </li>
      <li class="pure-menu-item tab1">
          <a href="#Debugger" class="pure-menu-link" for="tab3"><label for="tab3">Debugger</label></a>
      </li>
      <li class="pure-menu-item tab2">
          <a href="#Emulator" class="pure-menu-link" for="tab1"><label href="#Emulator" for="tab1">Emulator</label></a>
      </li>
      <li class="pure-menu-item tab3">
          <a href="#6502Info" class="pure-menu-link" for="tab4"><label for="tab4">6502 instruction set</label></a>
      </li>
  </ul>

  <section>
    <div class="tab1" style="background-image:url('res/appleIIplus_bck_650.png');background-size:1300px;height:1300px;background-repeat:no-repeat;image-rendering:pixelated;">
      <!--   EMULATOR  -->

      <script type="text/javascript" src="res/EMU_apple2main.js"></script>
      <script type="text/javascript" src="res/EMU_cpu6502.js"></script>
      <script type="text/javascript" src="res/EMU_apple2roms.js"></script>
      <script type="text/javascript" src="res/EMU_apple2video.js"></script>
      <script type="text/javascript" src="res/EMU_appledisk2.js"></script>
      <script type="text/javascript" src="res/EMU_apple2io.js"></script>
      <script type="text/javascript" src="res/EMU_apple2hw.js"></script>
      <script type="text/javascript" src="res/EMU_apple2keys.js"></script>
      <script type="text/javascript" src="res/EMU_apple2plus.js"></script>

        <div style="padding:4px 90px">
        <input type="button" value="Pasteboard" onclick="javascript:onPasteboard()">
        <input type="button" value="Monitor" onclick="javascript:this.name=(this.name?Number(this.name)+1:1);onChangeMonitor(this.name)">
        <input type="button" onclick="javascript:pauseButton()" id="pausebutton" value="Pause ">
        <input type="button" onclick="javascript:resetButton()" id="resetbutton" value="Reset">
        <input type="button" onclick="javascript:restartButton()" id="restartbutton" value="Restart">
        Disk Image: <input type="file" id="loadfile" value="" onchange="javascript:loadDisk()">
        </div>
        <div class="hints1" id="paste" hidden="" style="z-index:2;position:absolute;left:90px">
        <form name="board">
          <textarea cols=40 rows=3  placeholder="Paste here" name=boardText></textarea>
          <!--textarea cols=40 rows=3  name=captureText></textarea-->
          <!--textarea-- cols=40 rows=3  name=logText></!--textarea-->
        </form>
        <input type="button" value="Paste" onclick="javascript:onPasteboard();onBoardPaste()"><input type="button" value="Clear" onclick="javascript:onBoardClear()"><input type="button" value="Hide" onclick="javascript:onPasteboard()">
        </div>
        <script type="text/javascript">
        var bColor = false;

        function onChangeMonitor(type) { apple2plus.monitor(type) }
        function onPasteboard() { var e = document.getElementById('paste'); e.hidden = !e.hidden; }
        function onBoardPaste() {
           var e = board.boardText.value;
           e = e.replace(/\r\n/g,"\r");
           e = e.replace(/\n/g,"\r");
           for(var _i=0;_i<e.length;_i++)
           {
             var event = {"charCode":false,"metaKey":false,"altKey":false,"keyCode":e.charCodeAt(_i)}
             apple2OnKeyPress(event);
             if(e.charCodeAt(_i)==13) apple2plus.cycle(10000 * appleIntervalTime);  // carriage return takes more cycle time
             apple2plus.cycle(1000 * appleIntervalTime);
           }
        }
        function onBoardClear() { board.boardText.value = ""; board.logText.value = ""  ; board.captureText.value = "" }
        </script>

        <canvas class="appvid" id="applescreen" width="560" height="384"></canvas>
        <br>
        <img src=res/appleIIplus_kbd_650.png style="padding-top:0px;padding-left:105px;opacity:0.5;image-rendering:pixelated;" onmouseout="this.style.opacity=0" onmouseover="this.style.opacity=1">
        <!-- TODO: FIND A WAY TO MOVE UP THIS INCLUDE (TRIGGER A FUNCTION ONLOAD ?)-->
        

      <!--   EMULATOR  -->
    </div>
    <div class="tab2">
      <!-- ASSEMBLER -->

      <style> @font-face {  font-family: 'Arcade'; src: URL('res/ARCADE_N.TTF') format('truetype') } </style>
      <link rel="stylesheet" href="res/6502assembler.css">
      <script language="JavaScript" type="text/javascript" src="res/6502assembler.js"></script>
      <script language="JavaScript" type="text/javascript" src="res/6502assembler_gui.js"></script>

      <form name="ass" onsubmit="return false">
        <table style="background:#76B9CE;border-radius:10px;">
          <thead>
          <tr>
            <td valign=top style="display:flex;flex-wrap:wrap;width:340px">
              <textarea name="srcfield" onscroll="syncScroll(document.forms.ass.srcfield,document.forms.ass.listing)" class="dotmatrix_bck" style="width:280px;height:400px;margin:10px;overflow:auto;white-space:pre;word-wrap:normal;/*white-space:nowrap;*/" wrap=off placeholder="Source code" autofocus>*=$6000
       LDX #0
Label1 TXA
       STA $0400,X
       LDA #1
       STA $D800,X
       INX
       BNE Label1
       RTS
.END
              </textarea>
              <br>
              <script>
              function to_debugger()
              {
                document.getElementById('debugfield').innerHTML=document.getElementById('codefield').innerHTML;
                document.getElementById('tab3').checked=true;
                document.getElementById('tab2').checked=false;
              }
              </script>
              <button onclick="assemble();document.getElementById('codefield').innerHTML=ass.codefield.value.replace(/\n/g,'<br>')"><i class="fa fa-cogs"></i> generate</button>
              <button onclick="board.boardText.value='CALL-151\r\n'+document.getElementById('codefield').innerHTML.replace(/<br>/g,'\n')+'\r\n';onPasteboard();document.getElementById('tab1').checked=true;document.getElementById('tab2').checked=false;">
                <i class="fa fa-arrow-circle-up"></i> to emulator</button>
                <button onclick="to_debugger()">
                  <i class="fa fa-arrow-circle-up"></i> to debugger</button>
              <button onclick="javascript:onToolBox('SrcTools')"><i class="fa fa-wrench"></i> tools & config</button>
              <button onclick="onhelp(asmHelp(),document.getElementById('codefield'))"><i class="fa fa-book"></i> help</button>
              <button onclick="assemble_step();"><i class="fa fa-road"></i> trace</button>

            </td>
            <td valign=top>
              <textarea name="listing" onscroll="syncScroll(document.forms.ass.listing,document.forms.ass.srcfield)" readonly="readonly" wrap="virtual" class="dotmatrix_bck" style="width:260px;height:400px;margin:10px 10px 10px 0px;-webkit-filter: brightness(0.95);filter: brightness(0.95);" placeholder="Listing"></textarea>
            </td>
          </tr>
          <tr>
            <td colspan=2>
              <div id="SrcTools" hidden="">
                <script>document.write(sTools);</script>
              </div>
            </td>
          </tr>
        </thead>

<style>

#codefield,#debugfield
{
  word-break:break-all;
  overflow-wrap:anywhere;
  overflow-y:scroll;
  white-space:normal;
  outline: 0px solid transparent;
}

#codefield::-webkit-scrollbar {
  background-color: transparent;
}
#codefield::-webkit-scrollbar-thumb {
  background-color: #AFFFF6;
}

#debugfield::-webkit-scrollbar {
  background-color: transparent;
}
#debugfield::-webkit-scrollbar-thumb {
  background-color: #AFFFF6;
}


</style>

          <tr>
            <td colspan=2 style="background-image:url('res/CRT_TV_50b.png');background-size:800px 560px;background-repeat:no-repeat;image-rendering:pixelated;">
              <div style="height:90px">
              </div>
              <div id="codefield" contenteditable="true" class=scrollbar
              style="font-family:'Arcade';font-size:8px;color:#AFFFF6;width:350px;height:270px;margin-left:105px;">OBJECT CODE:</div>
              <textarea name="codefield" hidden=""></textarea>
              <div style="height:180px">
              </div>

              </div>
            </td>
          </tr>
        </table>
      </form>


      <script>
        function onhelp(txt,target)
        {
            if( typeof(_o.tools[target.id])=="undefined" )
              _o.tools[target.id] = {"toggle":false,"cache":""}

            _o.tools[target.id].toggle = !_o.tools[target.id].toggle
            if(_o.tools[target.id].toggle)
            {
              _o.tools[target.id].cache = target.innerHTML;
              target.innerHTML = txt;
            }
            else
              target.innerHTML = _o.tools[target.id].cache;
        }

        //var ignoreScrollEvents = false
        function syncScroll(element1, element2) {
          element2.scrollTop = element1.scrollTop;
          /*
        	element1.scroll(function (e) {
        		var ignore = ignoreScrollEvents
        		ignoreScrollEvents = false
        		if (ignore) return

        		ignoreScrollEvents = true
        		element2.scrollTop(element1.scrollTop)
        	})
          */
        }

        function updateScroll(el)
        {
            var element = document.getElementById(el);
            element.scrollTop = element.scrollHeight;
        }
      </script>


      <!-- ASSEMBLER -->
    </div>
    <div class="tab3">
      <!-- DEBUGGER -->

    	<script language="JavaScript" type="text/javascript" src="res/DBG_6502cpu.js"></script>
    	<script language="JavaScript" type="text/javascript" src="res/DBG_6502gui.js"></script>
      <link rel="stylesheet" href="res/DBG_6502.css">
      <style>
      .regdisp {
        width: 218px;
        height: 69px;
      }

      .regscroll_h {
        width: 216px;
        overflow-x: auto;
        scroll-behavior: smooth;
      }

      .regpar {display: flex; scroll-behavior: smooth;}

      .regbox {
        flex-shrink: 0;
        height: 40px;
        width: 25px;
        text-align: center;
      }

      .regbyte {
      flex-shrink: 0;
      height: 16px;
      width: 25px;
      border-style: solid;
      border-width: 1px;
      text-align: center;
      }

      .regbyte_red
      {
        /*  @extend .regbyte */;
        flex-shrink: 0;
        height: 16px;
        width: 25px;
        border-style: solid;
        border-width: 1px;
        background-color:red;
      }

      .regbyte_green
      {
        /*  @extend .regbyte */;
        flex-shrink: 0;
        height: 16px;
        width: 25px;
        border-style: solid;
        border-width: 1px;
        background-color:#00D000
      }

      .regadr {
        font-size:xx-small;
      }

      #dispStep, #watchdisp
      {
        white-space:normal;
        word-break:break-all;
        overflow-wrap:anywhere;
        overflow-y:scroll;
      }

      .dtable {
       width:220px;
       font-size:xx-small;
      }

      .dtable tr td {
        border:1px solid black;
        position: relative;
        text-align:center;
        nowrap:nowrap;
        font-size: small;
        width:12px;
        text-align:center;
        white-space: nowrap;
       }

      </style>

      <table width="700px" cellspacing="0" cellpadding="0" style="background-color:#76B9CE;border-radius:10px;">
    	<tr>
    		<td>
          <form action="#" onsubmit="singleStep(); return false"></form>
          <form name="MemLoader" onsubmit="showMem();return false"></form>
          <textarea id="mem" name="mem" rows="16" cols="62" wrap="virtual" hidden=""></textarea>
    		</td>
    	</tr>
    	<tr>
    		<td>
          <div>
              <!-- LEFT PANE -->
    			     <div class="displayLr" style="float:left;width:250px;height:200px;font-size:small/*;border-style:solid;border-width:1px;border-color:yellow*/">
                 <div id="dispStep" style="width:248px;height:98px;font-size:small;" contenteditable="true" oncut="return false" onpaste="return false" onkeydown="if(event.metaKey) return true; return false;"></div>
                 <div style="width:248px;height:4px"></div>
                 <div id="watchdisp" style="width:248px;height:98px;font-size:small;" contenteditable="true" oncut="return false" onpaste="return false" onkeydown="if(event.metaKey) return true; return false;"></div>
               </div>
               <!-- RIGHT PANE -->
               <div style="float:left;/*border-style:solid;border-width:1px;border-color:yellow;*/">
                 <!-- BEGIN DASHBOARD -->
                <div id="regdisp" class="regdisp"></div>
                 <table class=dtable>
           				<tr>
           					<td><a onclick="setRegister('PC'); return false;" onfocus="if(this.blur) this.blur();" title="set PC">PC</a></td>
           					<td>&nbsp;</td>
           					<td><a onclick="setRegister('AC'); return false;" onfocus="if(this.blur) this.blur();" title="set AC">A</a></td>
           					<td><a onclick="setRegister('XR'); return false;" onfocus="if(this.blur) this.blur();" title="set XR">X</a></td>
           					<td><a onclick="setRegister('YR'); return false;" onfocus="if(this.blur) this.blur();" title="set YR">Y</a></td>
           					<td><a onclick="setRegister('SR'); return false;" onfocus="if(this.blur) this.blur();" title="set SR">SR</a></td>
           					<td><a onclick="setRegister('SP'); return false;" onfocus="if(this.blur) this.blur();" title="set SP">SP</a></td>
           				</tr>
           				<tr>
           					<td><div id="dispPC" class="displayLr" onclick="setRegister('PC'); return false;" style="cursor: pointer;">0000</div></td>
           					<td>&nbsp;</td>
           					<td><div id="dispAC" class="displayLr">00</div></td>
           					<td><div id="dispXR" class="displayLr">00</div></td>
           					<td><div id="dispYR" class="displayLr">00</div></td>
           					<td><div id="dispSR" class="displayLr">20</div></td>
           					<td><div id="dispSP" class="displayLr">FF</div></td>
           				</tr>
           			</table>
           			<table class=dtable>
           				<tr>
           					<td><a onclick="flipSRBit(7); return false;" onfocus="if(this.blur) this.blur();" title="flip Negative flag">N</a></td>
           					<td><a onclick="flipSRBit(6); return false;" onfocus="if(this.blur) this.blur();" title="flip Overflow flag">V</a></td>
           					<td><a onclick="flipSRBit(5); return false;" onfocus="if(this.blur) this.blur();" title="flip bit 5 (ignored)">-</a></td>
           					<td><a onclick="flipSRBit(4); return false;" onfocus="if(this.blur) this.blur();" title="flip Break flag">B</a></td>
           					<td><a onclick="flipSRBit(3); return false;" onfocus="if(this.blur) this.blur();" title="flip Decimal flag">D</a></td>
           					<td><a onclick="flipSRBit(2); return false;" onfocus="if(this.blur) this.blur();" title="flip Interrupt flag">I</a></td>
           					<td><a onclick="flipSRBit(1); return false;" onfocus="if(this.blur) this.blur();" title="flip Zero flag">Z</a></td>
           					<td><a onclick="flipSRBit(0); return false;" onfocus="if(this.blur) this.blur();" title="flip Carry flag">C</a></td>
           				</tr>
           				<tr>
           					<td><div id="dispSR7" class="displayLr">0</div></td>
           					<td><div id="dispSR6" class="displayLr">0</div></td>
           					<td><div id="dispSR5" class="displayLr">1</div></td>
           					<td><div id="dispSR4" class="displayLr">0</div></td>
           					<td><div id="dispSR3" class="displayLr">0</div></td>
           					<td><div id="dispSR2" class="displayLr">0</div></td>
           					<td><div id="dispSR1" class="displayLr">0</div></td>
           					<td><div id="dispSR0" class="displayLr">0</div></td>
           				</tr>
           			</table>
           			<table class=dtable>
           				<tr>
           					<td><a onclick="setWatchByte('AD'); return false;" onfocus="if(this.blur) this.blur();" title="set AD">AD</a></td>
           					<td>&nbsp;</td>
           					<td><a onclick="setWatchByte('R1'); return false;" onfocus="if(this.blur) this.blur();" title="set R1">R1</a></td>
           					<td><a onclick="setWatchByte('R2'); return false;" onfocus="if(this.blur) this.blur();" title="set R2">R2</a></td>
           					<td><a onclick="setWatchByte('R3'); return false;" onfocus="if(this.blur) this.blur();" title="set R3">R3</a></td>
           					<td><a onclick="setWatchByte('R4'); return false;" onfocus="if(this.blur) this.blur();" title="set R4">R4</a></td>
           					<td><a onclick="setWatchByte('R5'); return false;" onfocus="if(this.blur) this.blur();" title="set R5">R5</a></td>
           					<td><a onclick="setWatchByte('R6'); return false;" onfocus="if(this.blur) this.blur();" title="set R6">R6</a></td>
           				</tr>
           				<tr>
           					<td><div id="dispAD" class="displayLr" onclick="setWatch('AD'); return false;" style="cursor: pointer;">0000</div></td>
           					<td>&nbsp;</td>
           					<td><div id="dispR1" class="displayLr">00</div></td>
           					<td><div id="dispR2" class="displayLr">00</div></td>
           					<td><div id="dispR3" class="displayLr">00</div></td>
           					<td><div id="dispR4" class="displayLr">00</div></td>
           					<td><div id="dispR5" class="displayLr">00</div></td>
           					<td><div id="dispR6" class="displayLr">00</div></td>
           				</tr>
           			</table>
           			<table class=dtable>
           				<tr>
           					<td><a onclick="setwatchBit(7); return false;" onfocus="if(this.blur) this.blur();" title="bit7">7</a></td>
           					<td><a onclick="setwatchBit(6); return false;" onfocus="if(this.blur) this.blur();" title="bit6">6</a></td>
           					<td><a onclick="setwatchBit(5); return false;" onfocus="if(this.blur) this.blur();" title="bit5">5</a></td>
           					<td><a onclick="setwatchBit(4); return false;" onfocus="if(this.blur) this.blur();" title="bit4">4</a></td>
           					<td><a onclick="setwatchBit(3); return false;" onfocus="if(this.blur) this.blur();" title="bit3">3</a></td>
           					<td><a onclick="setwatchBit(2); return false;" onfocus="if(this.blur) this.blur();" title="bit2">2</a></td>
           					<td><a onclick="setwatchBit(1); return false;" onfocus="if(this.blur) this.blur();" title="bit1">1</a></td>
           					<td><a onclick="setwatchBit(0); return false;" onfocus="if(this.blur) this.blur();" title="bit0">0</a></td>
           				</tr>
                    <td><div id="disp7" class="displayLr">0</div></td>
                    <td><div id="disp6" class="displayLr">0</div></td>
                    <td><div id="disp5" class="displayLr">0</div></td>
                    <td><div id="disp4" class="displayLr">0</div></td>
                    <td><div id="disp3" class="displayLr">0</div></td>
                    <td><div id="disp2" class="displayLr">0</div></td>
                    <td><div id="disp1" class="displayLr">0</div></td>
                    <td><div id="disp0" class="displayLr">0</div></td>
           				</tr>
           			</table>

                  <!-- END DASHBOARD -->
               </div>
               <div style="float:left">

               <table class=gtable>
               <tr><td>$0000</td><td id='m0000' class=gtip></td><td id='m0100'></td><td id='m0200'></td><td id='m0300'></td><td id='m0400'></td><td id='m0500'></td><td id='m0600'></td><td id='m0700'></td><td id='m0800'></td><td id='m0900'></td><td id='m0A00'></td><td id='m0B00'></td><td id='m0C00'></td><td id='m0D00'></td><td id='m0E00'></td><td id='m0F00'></td></tr>
               <tr><td>$1000</td><td id='m1000'></td><td id='m1100'></td><td id='m1200'></td><td id='m1300'></td><td id='m1400'></td><td id='m1500'></td><td id='m1600'></td><td id='m1700'></td><td id='m1800'></td><td id='m1900'></td><td id='m1A00'></td><td id='m1B00'></td><td id='m1C00'></td><td id='m1D00'></td><td id='m1E00'></td><td id='m1F00'></td></tr>
               <tr><td>$2000</td><td id='m2000'></td><td id='m2100'></td><td id='m2200'></td><td id='m2300'></td><td id='m2400'></td><td id='m2500'></td><td id='m2600'></td><td id='m2700'></td><td id='m2800'></td><td id='m2900'></td><td id='m2A00'></td><td id='m2B00'></td><td id='m2C00'></td><td id='m2D00'></td><td id='m2E00'></td><td id='m2F00'></td></tr>
               <tr><td>$3000</td><td id='m3000'></td><td id='m3100'></td><td id='m3200'></td><td id='m3300'></td><td id='m3400'></td><td id='m3500'></td><td id='m3600'></td><td id='m3700'></td><td id='m3800'></td><td id='m3900'></td><td id='m3A00'></td><td id='m3B00'></td><td id='m3C00'></td><td id='m3D00'></td><td id='m3E00'></td><td id='m3F00'></td></tr>
               <tr><td>$4000</td><td id='m4000'></td><td id='m4100'></td><td id='m4200'></td><td id='m4300'></td><td id='m4400'></td><td id='m4500'></td><td id='m4600'></td><td id='m4700'></td><td id='m4800'></td><td id='m4900'></td><td id='m4A00'></td><td id='m4B00'></td><td id='m4C00'></td><td id='m4D00'></td><td id='m4E00'></td><td id='m4F00'></td></tr>
               <tr><td>$5000</td><td id='m5000'></td><td id='m5100'></td><td id='m5200'></td><td id='m5300'></td><td id='m5400'></td><td id='m5500'></td><td id='m5600'></td><td id='m5700'></td><td id='m5800'></td><td id='m5900'></td><td id='m5A00'></td><td id='m5B00'></td><td id='m5C00'></td><td id='m5D00'></td><td id='m5E00'></td><td id='m5F00'></td></tr>
               <tr><td>$6000</td><td id='m6000'></td><td id='m6100'></td><td id='m6200'></td><td id='m6300'></td><td id='m6400'></td><td id='m6500'></td><td id='m6600'></td><td id='m6700'></td><td id='m6800'></td><td id='m6900'></td><td id='m6A00'></td><td id='m6B00'></td><td id='m6C00'></td><td id='m6D00'></td><td id='m6E00'></td><td id='m6F00'></td></tr>
               <tr><td>$7000</td><td id='m7000'></td><td id='m7100'></td><td id='m7200'></td><td id='m7300'></td><td id='m7400'></td><td id='m7500'></td><td id='m7600'></td><td id='m7700'></td><td id='m7800'></td><td id='m7900'></td><td id='m7A00'></td><td id='m7B00'></td><td id='m7C00'></td><td id='m7D00'></td><td id='m7E00'></td><td id='m7F00'></td></tr>
               <tr><td>$8000</td><td id='m8000'></td><td id='m8100'></td><td id='m8200'></td><td id='m8300'></td><td id='m8400'></td><td id='m8500'></td><td id='m8600'></td><td id='m8700'></td><td id='m8800'></td><td id='m8900'></td><td id='m8A00'></td><td id='m8B00'></td><td id='m8C00'></td><td id='m8D00'></td><td id='m8E00'></td><td id='m8F00'></td></tr>
               <tr><td>$9000</td><td id='m9000'></td><td id='m9100'></td><td id='m9200'></td><td id='m9300'></td><td id='m9400'></td><td id='m9500'></td><td id='m9600'></td><td id='m9700'></td><td id='m9800'></td><td id='m9900'></td><td id='m9A00'></td><td id='m9B00'></td><td id='m9C00'></td><td id='m9D00'></td><td id='m9E00'></td><td id='m9F00'></td></tr>
               <tr><td>$A000</td><td id='mA000'></td><td id='mA100'></td><td id='mA200'></td><td id='mA300'></td><td id='mA400'></td><td id='mA500'></td><td id='mA600'></td><td id='mA700'></td><td id='mA800'></td><td id='mA900'></td><td id='mAA00'></td><td id='mAB00'></td><td id='mAC00'></td><td id='mAD00'></td><td id='mAE00'></td><td id='mAF00'></td></tr>
               <tr><td>$B000</td><td id='mB000'></td><td id='mB100'></td><td id='mB200'></td><td id='mB300'></td><td id='mB400'></td><td id='mB500'></td><td id='mB600'></td><td id='mB700'></td><td id='mB800'></td><td id='mB900'></td><td id='mBA00'></td><td id='mBB00'></td><td id='mBC00'></td><td id='mBD00'></td><td id='mBE00'></td><td id='mBF00'></td></tr>
               <tr><td>$C000</td><td id='mC000'></td><td id='mC100'></td><td id='mC200'></td><td id='mC300'></td><td id='mC400'></td><td id='mC500'></td><td id='mC600'></td><td id='mC700'></td><td id='mC800'></td><td id='mC900'></td><td id='mCA00'></td><td id='mCB00'></td><td id='mCC00'></td><td id='mCD00'></td><td id='mCE00'></td><td id='mCF00'></td></tr>
               <tr><td>$D000</td><td id='mD000'></td><td id='mD100'></td><td id='mD200'></td><td id='mD300'></td><td id='mD400'></td><td id='mD500'></td><td id='mD600'></td><td id='mD700'></td><td id='mD800'></td><td id='mD900'></td><td id='mDA00'></td><td id='mDB00'></td><td id='mDC00'></td><td id='mDD00'></td><td id='mDE00'></td><td id='mDF00'></td></tr>
               <tr><td>$E000</td><td id='mE000'></td><td id='mE100'></td><td id='mE200'></td><td id='mE300'></td><td id='mE400'></td><td id='mE500'></td><td id='mE600'></td><td id='mE700'></td><td id='mE800'></td><td id='mE900'></td><td id='mEA00'></td><td id='mEB00'></td><td id='mEC00'></td><td id='mED00'></td><td id='mEE00'></td><td id='mEF00'></td></tr>
               <tr><td>$F000</td><td id='mF000'></td><td id='mF100'></td><td id='mF200'></td><td id='mF300'></td><td id='mF400'></td><td id='mF500'></td><td id='mF600'></td><td id='mF700'></td><td id='mF800'></td><td id='mF900'></td><td id='mFA00'></td><td id='mFB00'></td><td id='mFC00'></td><td id='mFD00'></td><td id='mFE00'></td><td id='mFF00'></td></tr>
               </table>

               <script>
                var lbl = {
                           "A2P":{
                           "0000-00FF":["#FFFFFF","zero-page"]
                          ,"0100-01FF":["#E0E0E0","stack"]
                          ,"0200-02FF":["#00D000","GETLN buffer"]
                          ,"0300-03FF":["#00D000","Vector pointers"]
                          ,"0400-07FF":["#DF48FF","TXT1/LORES1"]
                          ,"0800-0BFF":["#D040E0","TXT2/LORES2"]
                          ,"0C00-1FFF":["#00D000","APPLESOFT PRG"]
                          ,"2000-3FFF":["#0000FF","HIRES1"]
                          ,"4000-5FFF":["#0000E0","HIRES2"]
                          ,"C000-CFFF":["#D0D000","I/O"]
                          ,"D000-F7FF":["#D00000","BASIC ROM"]
                          ,"F800-FFFF":["#D00000","Monitor ROM"]
                          ,"0300":["","GETLN"]
                          }
                        }

                 // PREPARE ALL DATA
                 var blk_col = {}, blk_txt = {} //, c = ""
                 for(var i in lbl[_o.sys])
                 {
                   var a = i.split("-"); var b = [parseInt(a[0],16),parseInt(a[1],16)];
                   for(var j=b[0];j<b[1];j+=parseInt("0100",16))
                   { //c += ("0000"+j.toString(16)).slice(-4).toUpperCase()+" "+blk[i][0]+"<br>";
                     var idx = ("0000"+j.toString(16)).slice(-4).toUpperCase()
                     blk_col[idx] = lbl[_o.sys][i][0]; blk_txt[idx] = lbl[_o.sys][i][1];
                   }
                 } //document.write(c)

                 // DISPLAY GRID
                 /*
                 var s = "<table border=1 style='width:180px;height:180px;margin-left:10px'>"
                 for(var i=0;i<16;i++)
                 {
                   s+="<tr><td style='font-size:xx-small;padding:0px;margin:0px;width:20%'>$"+i.toString(16).toUpperCase()+"000</td>"
                   for(var j=0;j<16;j++)
                   {
                     var b = i.toString(16).toUpperCase() + j.toString(16).toUpperCase() + "00";
                     s+="<td id='m"+b+"' class=gtip></td>";
                   }
                   s+="</tr>\n"
                 }
                 s+="</table>"
                 document.write("<textarea>"+s+"</textarea>")
                 */

                 // PAINT GRID
                 for(var i in lbl[_o.sys])
                 {
                   var a = i.split("-");
                   if(a.length==2)
                   {
                     var b = [parseInt(a[0],16),parseInt(a[1],16)];
                     for(var j=b[0];j<b[1];j+=parseInt("0100",16))
                     {
                       var idx = ("000"+j.toString(16)).slice(-4).toUpperCase();
                       var el = document.getElementById("m"+idx);
                       if(blk_col[idx].charAt(0)=="#") el.style.backgroundColor = blk_col[idx];
                       el.innerHTML = "<span class=gt>"+blk_txt[idx]+"</span>"
                     }
                   }
                 }

                 //alert(document.getElementById("m0000"))
                 //document.write("<button onclick=alert(document.getElementById('m0000'))>TEST</button>")

                 //document.getElementById("m0000").style.backgroundColor = "red";

/*
                var s = "<table border=1 style='width:180px;height:180px;margin-left:10px'>"
                for(var i=0;i<16;i++)
                {
                  s+="<tr><td style='font-size:xx-small;padding:0px;margin:0px;width:20%'>$"+i.toString(16).toUpperCase()+"000</td>"
                  for(var j=0;j<16;j++)
                  {
                    var blk = i.toString(16).toUpperCase() + j.toString(16).toUpperCase() + "00";
                    s+="<td style='width:5%;background-color:"+blk_col[blk]+"' class='tooltip'>"
                    +(blk_txt[blk]?("<span class='tooltiptext'>"+blk_txt[blk]+"</span>"):"")
                    +"</td>";
                  }
                  s+="</tr>"
                }
                s+="</table>"
              //document.write(s);
*/
              </script>


               </div>
          </div>
    		</td>
    	</tr>
      <tr>
        <td>
          <!--div style="float:left;">start&nbsp;$</div><div onclick='chage_adr(this)' style="border-style: solid;border-width:1px; width:100px;">6000</div-->
          <input type="text" id="memAddr" name="memAddr" size="4" value="6000" hidden="" style="float:left;">

          <script>

              var oBASE = new function() {
                  this.convert = function (str, fromBase, toBase)
                  {
                    if(typeof(fromBase)=='object') { this.fromSymbols = fromBase[0] }
                    if(typeof(toBase)  =='object') { this.toSymbols = toBase[0] }
                    fromBase = this.fromSymbols.length; toBase = this.toSymbols.length;

                    // PARSE INPUT DIGITS ARRAY
                    for(var _a = [0], str = str.split(''); str.length > 0 && _a[_a.push(this.fromSymbols.indexOf(str.pop())) - 1] >= 0;);
                    var _d = _a.shift() + _a[_a.length-1]>=0 ? _a : null; if (_d === null) return null;

                    // BASE CONVERSION
                    for (var _n = 0,_a = [],_p = [1]; _n < _d.length; _n++) { _a = add(_a, mul(_d[_n], _p, toBase), toBase); _p = mul(fromBase, _p, toBase) }

                    // PARSE OUTPUT DIGITS ARRAY
                    for (var _n = _a.length - 1, _o = ''; _n >= 0; _o += this.toSymbols[_a[_n--]]);
                    return _o.length==0?this.toSymbols[0]:_o;
                  }

                  var add = function(x, y, base) {
                      var _m = Math.max(x.length, y.length);
                      for(var _c = 0,_n = 0,_r = [],_z; _n < _m || _c; _c = Math.floor(_z / base)) {
                        var _z = _c + (_n < x.length ? x[_n] : 0) + (_n < y.length ? y[_n] : 0);
                        var _n =  _r.push(_z % base);
                      }
                      return _r;
                  }

                  var mul = function(x, pow, base) {
                      for(var _r = x < 0 ? null : []; x > 0; x = x >> 1) {
                        if(x & 1) _r = add(_r, pow, base);
                        pow = add(pow, pow, base);
                      }
                      return _r;
                  }
              }()


          </script>
          <!--button style="float:left"><i class="fa fa-play"></i>start at $6000</button-->
          <button onclick="debugReset();load_adr(this)" style="float:left">
            <i class="fa fa-truck"></i> load at addr</button>
          <button onclick="singleStep()" style="float:left;"><i class="fa fa-paw">
            </i> step</button>
        </td>
      </tr>
    	<tr>
    		<td>
    			<button onclick="javascript:onToolBox('DbgTools')"><i class="fa fa-wrench">
            </i> tools & config</button>
    			<button onclick="onhelp(DbgHelp(),document.getElementById('debugfield'));document.getElementById('debugfield').innerHTML=debuggerHelp()">
            <i class="fa fa-book"></i> help</button>
    			<div id="DbgTools" hidden="">
    				<input type="button" value="continous run" class="isButton" onclick="run()">
            <input type="button" value="reset debugger" class="isButton" onclick="debugReset()">
    				<input type="button" value="look up mem #" class="isButton" onclick="memLookup()">
    				<input type="button" value="reset CPU" class="isButton" onclick="masterReset()">
    				show ASCII <input type="checkbox" id="showASCII" value="1" class="formField"><br>
    				<input type="button" value="load C64 ROMs" class="isButton" onclick="loadC64Roms()">
            <input type="button" value="load AppleII+ ROMs" class="isButton" onclick="loadApple2PlusRoms()">
            <input type="button" value="load AppleII+ DEBUG" class="isButton" onclick="loadApple2PlusRoms('DBG')">
            <input type="button" value="map AppleII+ zero-page" class="isButton" onclick="Apple2PlusZP()">
            <input type="button" value="memory MAP" class="isButton" onclick="RAM_checksum()">
    				<iframe name="c64loader" border="0" framespacing="0" marginwidth="0" marginheight="0" width="0" height="0" frameborder="0"></iframe>
    				<input type="button" value="&nbsp;show memory&nbsp;" class="isButton" onclick="showMem()">
    				<div id="dispCycles" class="displayLr">total cycles: 0</div>
            <input id="watchparam" value="" style="width:300px">
            <input id="watchparam2" value="" style="width:300px">
    			</div>
    		</td>
    	</tr>
    	<tr>
    		<td colspan=2 style="background-image:url('res/CRT_TV_50b.png');background-size:800px 560px;background-repeat:no-repeat;image-rendering:pixelated;">
    			<div style="height:90px">
    			</div>
    			<div id="debugfield" contenteditable="true"
    				style="font-family:'Arcade';font-size:8px;color:#AFFFF6;width:350px;height:270px;margin-left:105px;white-space:normal;word-break:break-all;overflow-wrap:anywhere;overflow-y:scroll">
    			</div>
    			<!--textarea name="debugfield" hidden=""></textarea-->
    			<div style="height:180px">
    			</div>
    			</div>
    		</td>
    	</tr>
    </table>
      <!-- DEBUGGER -->
    </div>
    <div class="tab4">

      <!-- 6502 REFERENCE -->
      <script>

      document.addEventListener('DOMContentLoaded', function() {
        var opcDict = {
            'ADC': 'Add with carry',
            'AND': 'And',
            'ASL': 'Arithmetic shift left',
            'BCC': 'Branch on carry clear',
            'BCS': 'Branch on carry set',
            'BEQ': 'Branch on equal',
            'BIT': 'Bit test',
            'BMI': 'Branch on minus',
            'BNE': 'Branch on not equal',
            'BPL': 'Branch on plus',
            'BRK': 'Break / interrupt',
            'BVC': 'Branch on overflow clear',
            'BVS': 'Branch on overflow set',
            'CLC': 'Clear carry',
            'CLD': 'Clear decimal',
            'CLI': 'Clear interrupt disable',
            'CLV': 'Clear overflow',
            'CMP': 'Compare with accumulator',
            'CPX': 'Compare with X',
            'CPY': 'Compare with Y',
            'DEC': 'Decrement',
            'DEX': 'Decrement X',
            'DEY': 'Decrement Y',
            'EOR': 'Exclusive or',
            'INC': 'Increment',
            'INX': 'Increment X',
            'INY': 'Increment Y',
            'JMP': 'Jump',
            'JSR': 'Jump subroutine',
            'LDA': 'Load accumulator',
            'LDX': 'Load X',
            'LDY': 'Load Y',
            'LSR': 'Logical shift right',
            'NOP': 'No operation',
            'ORA': 'Or with accumulator',
            'PHA': 'Push accumulator onto stack',
            'PHP': 'Push processor status onto stack',
            'PLA': 'Pull accumulator from stack',
            'PLP': 'Pull processor status from stack',
            'ROL': 'Rotate left',
            'ROR': 'Rotate right',
            'RTI': 'Return from interrupt',
            'RTS': 'Return from subroutine',
            'SBC': 'Subtract with carry',
            'SEC': 'Set carry',
            'SED': 'Set decimal',
            'SEI': 'Set interrupt disable',
            'STA': 'Store accumulator',
            'STX': 'Store X',
            'STY': 'Store Y',
            'TAX': 'Transfer accumulator to X',
            'TAY': 'Transfer accumulator to Y',
            'TSX': 'Transfer stack pointer to X',
            'TXA': 'Transfer X to accumulator',
            'TXS': 'Transfer X to stack pointer',
            'TYA': 'Transfer Y to accumulator'
          },
          addrDict = {
            'A': 'accumulator (implied)',
            'abs': 'absolute',
            'abs,X': 'absolute, X-indexed',
            'abs,Y': 'absolute, Y-indexed',
            '#': 'immediate',
            'impl': 'implied',
            'ind': 'indirect',
            'X,ind': 'X-indexed, indirect',
            'ind,Y': 'indirect, Y-indexed',
            'rel': 'relative',
            'zpg': 'zero-page',
            'zpg,X': 'zero-page, X-indexed',
            'zpg,Y': 'zero-page, Y-indexed',
          },
          overlay;
        function OPClickHandler() {
          var opc = this.getAttribute('data-opc');
          if (opc) {
            if (overlay && overlay.parentNode) overlay.parentNode.removeChild(overlay);
            if(this.blur) this.blur();
            self.location.href = '#' + opc;
          }
        }
        function OPHoverHandler(event) {
          var descr = this.getAttribute('data-description');
          if (descr) {
            if (event.preventDefault) event.preventDefault();
            event.cancelBubble = true;
            event.returnValue = true;
            if (!overlay) {
              overlay = document.createElement('div');
              overlay.id = 'instrOverlay';
            }
            overlay.style.left = (this.offsetLeft + 4) + 'px';
            overlay.style.top = (this.offsetTop + this.offsetHeight + 4) + 'px';
            overlay.innerHTML = descr + '\n<small>Click for details&hellip;</small>';
            this.appendChild(overlay);
          }
        }
        function OPHideHandler(event) {
          if (overlay && overlay.parentNode) overlay.parentNode.removeChild(overlay);
        }
        var rows = document.querySelectorAll('table#opctable tbody tr');
        for (var r = 0, rl = rows.length; r < rl; r++) {
          var	cols = rows[r].getElementsByTagName('td'),
            hi = '$' + '\u200A' + r.toString(16).toUpperCase();
          for (var c = 0, cl = cols.length-1; c < cl; c++) {
            var	el = cols[c + 1],
              inst = hi + c.toString(16).toUpperCase();
            if (!el.className) {
              var matches = /^([A-Z]{3})(?:\s(.*))?$/.exec(el.innerHTML);
              if (matches) {
                var label = inst + '\nInstr.: ' + opcDict[matches[1]];
                if (matches[2]) label += '\nAddr.: ' + addrDict[matches[2]];
                el.setAttribute('data-description', label);
                el.setAttribute('aria-label', label);
                el.setAttribute('data-opc', matches[1]);
                el.className = 'clickable';
                el.addEventListener('click', OPClickHandler, true);
                el.addEventListener('mouseover', OPHoverHandler, true);
                el.addEventListener('mouseout', OPHideHandler, true);
                continue;
              }
            }
            el.setAttribute('data-description', inst);
          }
        }
        rows = null;
        document.querySelector('table#opctable').addEventListener('click', OPHideHandler, false);
      }, false);


      </script>


      <table id="opctable" aria-label="table of instruction codes">
      <thead>
      <tr>
      <th class="hi-nibble" aria-label="first column: high-nibble of byte (hexadecimal)">HI</th><th colspan="16" aria-label="columns 1 - 15: low nibble (hexadecimal)">LO-NIBBLE</th>
      </tr>
      <tr class="lo-nibble">
      <th>&nbsp;</th><th>00</th><th>01</th><th>02</th><th>03</th><th>04</th><th>05</th><th>06</th><th>07</th><th>08</th><th>09</th><th>0A</th><th>0B</th><th>0C</th><th>0D</th><th>0E</th><th>0F</th></tr>
      </thead>
      <tbody>
      <tr>
      <td class="hi-nibble">00</td><td>BRK impl</td><td>ORA X,ind</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>ORA zpg</td><td>ASL zpg</td><td class="undef">---</td><td>PHP impl</td><td>ORA #</td><td>ASL A</td><td class="undef">---</td><td class="undef">---</td><td>ORA abs</td><td>ASL abs</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">10</td><td>BPL rel</td><td>ORA ind,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>ORA zpg,X</td><td>ASL zpg,X</td><td class="undef">---</td><td>CLC impl</td><td>ORA abs,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>ORA abs,X</td><td>ASL abs,X</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">20</td><td>JSR abs</td><td>AND X,ind</td><td class="undef">---</td><td class="undef">---</td><td>BIT zpg</td><td>AND zpg</td><td>ROL zpg</td><td class="undef">---</td><td>PLP impl</td><td>AND #</td><td>ROL A</td><td class="undef">---</td><td>BIT abs</td><td>AND abs</td><td>ROL abs</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">30</td><td>BMI rel</td><td>AND ind,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>AND zpg,X</td><td>ROL zpg,X</td><td class="undef">---</td><td>SEC impl</td><td>AND abs,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>AND abs,X</td><td>ROL abs,X</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">40</td><td>RTI impl</td><td>EOR X,ind</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>EOR zpg</td><td>LSR zpg</td><td class="undef">---</td><td>PHA impl</td><td>EOR #</td><td>LSR A</td><td class="undef">---</td><td>JMP abs</td><td>EOR abs</td><td>LSR abs</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">50</td><td>BVC rel</td><td>EOR ind,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>EOR zpg,X</td><td>LSR zpg,X</td><td class="undef">---</td><td>CLI impl</td><td>EOR abs,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>EOR abs,X</td><td>LSR abs,X</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">60</td><td>RTS impl</td><td>ADC X,ind</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>ADC zpg</td><td>ROR zpg</td><td class="undef">---</td><td>PLA impl</td><td>ADC #</td><td>ROR A</td><td class="undef">---</td><td>JMP ind</td><td>ADC abs</td><td>ROR abs</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">70</td><td>BVS rel</td><td>ADC ind,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>ADC zpg,X</td><td>ROR zpg,X</td><td class="undef">---</td><td>SEI impl</td><td>ADC abs,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>ADC abs,X</td><td>ROR abs,X</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">80</td><td class="undef">---</td><td>STA X,ind</td><td class="undef">---</td><td class="undef">---</td><td>STY zpg</td><td>STA zpg</td><td>STX zpg</td><td class="undef">---</td><td>DEY impl</td><td class="undef">---</td><td>TXA impl</td><td class="undef">---</td><td>STY abs</td><td>STA abs</td><td>STX abs</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">90</td><td>BCC rel</td><td>STA ind,Y</td><td class="undef">---</td><td class="undef">---</td><td>STY zpg,X</td><td>STA zpg,X</td><td>STX zpg,Y</td><td class="undef">---</td><td>TYA impl</td><td>STA abs,Y</td><td>TXS impl</td><td class="undef">---</td><td class="undef">---</td><td>STA abs,X</td><td class="undef">---</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">A0</td><td>LDY #</td><td>LDA X,ind</td><td>LDX #</td><td class="undef">---</td><td>LDY zpg</td><td>LDA zpg</td><td>LDX zpg</td><td class="undef">---</td><td>TAY impl</td><td>LDA #</td><td>TAX impl</td><td class="undef">---</td><td>LDY abs</td><td>LDA abs</td><td>LDX abs</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">B0</td><td>BCS rel</td><td>LDA ind,Y</td><td class="undef">---</td><td class="undef">---</td><td>LDY zpg,X</td><td>LDA zpg,X</td><td>LDX zpg,Y</td><td class="undef">---</td><td>CLV impl</td><td>LDA abs,Y</td><td>TSX impl</td><td class="undef">---</td><td>LDY abs,X</td><td>LDA abs,X</td><td>LDX abs,Y</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">C0</td><td>CPY #</td><td>CMP X,ind</td><td class="undef">---</td><td class="undef">---</td><td>CPY zpg</td><td>CMP zpg</td><td>DEC zpg</td><td class="undef">---</td><td>INY impl</td><td>CMP #</td><td>DEX impl</td><td class="undef">---</td><td>CPY abs</td><td>CMP abs</td><td>DEC abs</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">D0</td><td>BNE rel</td><td>CMP ind,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>CMP zpg,X</td><td>DEC zpg,X</td><td class="undef">---</td><td>CLD impl</td><td>CMP abs,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>CMP abs,X</td><td>DEC abs,X</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">E0</td><td>CPX #</td><td>SBC X,ind</td><td class="undef">---</td><td class="undef">---</td><td>CPX zpg</td><td>SBC zpg</td><td>INC zpg</td><td class="undef">---</td><td>INX impl</td><td>SBC #</td><td>NOP impl</td><td class="undef">---</td><td>CPX abs</td><td>SBC abs</td><td>INC abs</td><td class="undef">---</td>
      </tr>
      <tr>
      <td class="hi-nibble">F0</td><td>BEQ rel</td><td>SBC ind,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>SBC zpg,X</td><td>INC zpg,X</td><td class="undef">---</td><td>SED impl</td><td>SBC abs,Y</td><td class="undef">---</td><td class="undef">---</td><td class="undef">---</td><td>SBC abs,X</td><td>INC abs,X</td><td class="undef">---</td>
      </tr>
      </tbody>
      </table>
      <p>&nbsp;</p>
      <p>Address Modes:</p>
      <table id="addressmodes" aria-label="table of address modes: (1) abbreviated notation, (2) verbous, (3) formal example, (4) semantical annotations">
      <tbody>
      <tr><td>A<td><td aria-hidden="true">....</td><td>Accumulator</td><td aria-hidden="true">&nbsp;</td><td>OPC A</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is AC (implied single byte instruction)</td></tr>
      <tr><td>abs<td><td aria-hidden="true">....</td><td>absolute</td><td aria-hidden="true">&nbsp;</td><td>OPC $LLHH</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is address $HHLL *</td></tr>
      <tr><td>abs,X<td><td aria-hidden="true">....</td><td>absolute, X-indexed</td><td aria-hidden="true">&nbsp;</td><td>OPC $LLHH,X</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is address; effective address is address incremented by X with carry **</td></tr>
      <tr><td>abs,Y<td><td aria-hidden="true">....</td><td>absolute, Y-indexed</td><td aria-hidden="true">&nbsp;</td><td>OPC $LLHH,Y</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is address; effective address is address incremented by Y with carry **</td></tr>
      <tr><td>#<td><td aria-hidden="true">....</td><td>immediate</td><td aria-hidden="true">&nbsp;</td><td>OPC #$BB</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is byte BB</td></tr>
      <tr><td>impl<td><td aria-hidden="true">....</td><td>implied</td><td aria-hidden="true">&nbsp;</td><td>OPC</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand implied</td></tr>
      <tr><td>ind<td><td aria-hidden="true">....</td><td>indirect</td><td aria-hidden="true">&nbsp;</td><td>OPC ($LLHH)</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is address; effective address is contents of word at address: C.w($HHLL)</td></tr>
      <tr><td>X,ind<td><td aria-hidden="true">....</td><td>X-indexed, indirect</td><td aria-hidden="true">&nbsp;</td><td>OPC ($LL,X)</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is zeropage address; effective address is word in (LL + X, LL + X + 1), inc. without carry: C.w($00LL + X)</td></tr>
      <tr><td>ind,Y<td><td aria-hidden="true">....</td><td>indirect, Y-indexed</td><td aria-hidden="true">&nbsp;</td><td>OPC ($LL),Y</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is zeropage address; effective address is word in (LL, LL + 1) incremented by Y with carry: C.w($00LL) + Y</td></tr>
      <tr><td>rel<td><td aria-hidden="true">....</td><td>relative</td><td aria-hidden="true">&nbsp;</td><td>OPC $BB</td><td aria-hidden="true">&nbsp;</td><td class="semantics">branch target is PC + signed offset BB ***</td></tr>
      <tr><td>zpg<td><td aria-hidden="true">....</td><td>zeropage</td><td aria-hidden="true">&nbsp;</td><td>OPC $LL</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is zeropage address (hi-byte is zero, address = $00LL)</td></tr>
      <tr><td>zpg,X<td><td aria-hidden="true">....</td><td>zeropage, X-indexed</td><td aria-hidden="true">&nbsp;</td><td>OPC $LL,X</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is zeropage address; effective address is address incremented by X without carry **</td></tr>
      <tr><td>zpg,Y<td><td aria-hidden="true">....</td><td>zeropage, Y-indexed</td><td aria-hidden="true">&nbsp;</td><td>OPC $LL,Y</td><td aria-hidden="true">&nbsp;</td><td class="semantics">operand is zeropage address; effective address is address incremented by Y without carry **</td></tr>
      </tbody>
      </table>

      <p aria-label="note 1">&nbsp;<br />*&nbsp;&nbsp; 16-bit address words are little endian, lo(w)-byte first, followed by the hi(gh)-byte.<br />
      (An assembler will use a human readable, big-endian notation as in $HHLL.)</p>
      <p aria-label="note 2">**&nbsp; The available 16-bit address space is conceived as consisting of pages of 256 bytes each, with<br />
      address hi-bytes represententing the page index. An increment with carry may affect the hi-byte<br />
      and may thus result in a crossing of page boundaries, adding an extra cycle to the execution.<br />
      Increments without carry do not affect the hi-byte of an address and no page transitions do occur.<br />
      Generally, increments of 16-bit addresses include a carry, increments of zeropage addresses don't.<br />
      Notably this is not related in any way to the state of the carry bit of the accumulator.</p>
      <p aria-label="note 3">*** Branch offsets are signed 8-bit values, -128 ... +127, negative offsets in two's complement.<br />
      Page transitions may occur and add an extra cycle to the exucution.</p>

      <p>&nbsp;</p>
      <p>Instructions by Name:</p>
      <table id="opclist" aria-label="table of mnemonics and their verbous equivalent">
      <tr><td><a href="#ADC" title="instruction details for ADC...">ADC</a></td><td aria-hidden="true">....</td><td>add with carry</td></tr>
      <tr><td><a href="#AND" title="instruction details for AND...">AND</a></td><td aria-hidden="true">....</td><td>and (with accumulator)</td></tr>
      <tr><td><a href="#ASL" title="instruction details for ASL...">ASL</a></td><td aria-hidden="true">....</td><td>arithmetic shift left</td></tr>
      <tr><td><a href="#BCC" title="instruction details for BCC...">BCC</a></td><td aria-hidden="true">....</td><td>branch on carry clear</td></tr>
      <tr><td><a href="#BCS" title="instruction details for BCS...">BCS</a></td><td aria-hidden="true">....</td><td>branch on carry set</td></tr>
      <tr><td><a href="#BEQ" title="instruction details for BEQ...">BEQ</a></td><td aria-hidden="true">....</td><td>branch on equal (zero set)</td></tr>
      <tr><td><a href="#BIT" title="instruction details for BIT...">BIT</a></td><td aria-hidden="true">....</td><td>bit test</td></tr>
      <tr><td><a href="#BMI" title="instruction details for BMI...">BMI</a></td><td aria-hidden="true">....</td><td>branch on minus (negative set)</td></tr>
      <tr><td><a href="#BNE" title="instruction details for BNE...">BNE</a></td><td aria-hidden="true">....</td><td>branch on not equal (zero clear)</td></tr>
      <tr><td><a href="#BPL" title="instruction details for BPL...">BPL</a></td><td aria-hidden="true">....</td><td>branch on plus (negative clear)</td></tr>
      <tr><td><a href="#BRK" title="instruction details for BRK...">BRK</a></td><td aria-hidden="true">....</td><td>break / interrupt</td></tr>
      <tr><td><a href="#BVC" title="instruction details for BVC...">BVC</a></td><td aria-hidden="true">....</td><td>branch on overflow clear</td></tr>
      <tr><td><a href="#BVS" title="instruction details for BVS...">BVS</a></td><td aria-hidden="true">....</td><td>branch on overflow set</td></tr>
      <tr><td><a href="#CLC" title="instruction details for CLC...">CLC</a></td><td aria-hidden="true">....</td><td>clear carry</td></tr>
      <tr><td><a href="#CLD" title="instruction details for CLD...">CLD</a></td><td aria-hidden="true">....</td><td>clear decimal</td></tr>
      <tr><td><a href="#CLI" title="instruction details for CLI...">CLI</a></td><td aria-hidden="true">....</td><td>clear interrupt disable</td></tr>
      <tr><td><a href="#CLV" title="instruction details for CLV...">CLV</a></td><td aria-hidden="true">....</td><td>clear overflow</td></tr>
      <tr><td><a href="#CMP" title="instruction details for CMP...">CMP</a></td><td aria-hidden="true">....</td><td>compare (with accumulator)</td></tr>
      <tr><td><a href="#CPX" title="instruction details for CPX...">CPX</a></td><td aria-hidden="true">....</td><td>compare with X</td></tr>
      <tr><td><a href="#CPY" title="instruction details for CPY...">CPY</a></td><td aria-hidden="true">....</td><td>compare with Y</td></tr>
      <tr><td><a href="#DEC" title="instruction details for DEC...">DEC</a></td><td aria-hidden="true">....</td><td>decrement</td></tr>
      <tr><td><a href="#DEX" title="instruction details for DEX...">DEX</a></td><td aria-hidden="true">....</td><td>decrement X</td></tr>
      <tr><td><a href="#DEY" title="instruction details for DEY...">DEY</a></td><td aria-hidden="true">....</td><td>decrement Y</td></tr>
      <tr><td><a href="#EOR" title="instruction details for EOR...">EOR</a></td><td aria-hidden="true">....</td><td>exclusive or (with accumulator)</td></tr>
      <tr><td><a href="#INC" title="instruction details for INC...">INC</a></td><td aria-hidden="true">....</td><td>increment</td></tr>
      <tr><td><a href="#INX" title="instruction details for INX...">INX</a></td><td aria-hidden="true">....</td><td>increment X</td></tr>
      <tr><td><a href="#INY" title="instruction details for INY...">INY</a></td><td aria-hidden="true">....</td><td>increment Y</td></tr>
      <tr><td><a href="#JMP" title="instruction details for JMP...">JMP</a></td><td aria-hidden="true">....</td><td>jump</td></tr>
      <tr><td><a href="#JSR" title="instruction details for JSR...">JSR</a></td><td aria-hidden="true">....</td><td>jump subroutine</td></tr>
      <tr><td><a href="#LDA" title="instruction details for LDA...">LDA</a></td><td aria-hidden="true">....</td><td>load accumulator</td></tr>
      <tr><td><a href="#LDX" title="instruction details for LDX...">LDX</a></td><td aria-hidden="true">....</td><td>load X</td></tr>
      <tr><td><a href="#LDY" title="instruction details for LDY...">LDY</a></td><td aria-hidden="true">....</td><td>load Y</td></tr>
      <tr><td><a href="#LSR" title="instruction details for LSR...">LSR</a></td><td aria-hidden="true">....</td><td>logical shift right</td></tr>
      <tr><td><a href="#NOP" title="instruction details for NOP...">NOP</a></td><td aria-hidden="true">....</td><td>no operation</td></tr>
      <tr><td><a href="#ORA" title="instruction details for ORA...">ORA</a></td><td aria-hidden="true">....</td><td>or with accumulator</td></tr>
      <tr><td><a href="#PHA" title="instruction details for PHA...">PHA</a></td><td aria-hidden="true">....</td><td>push accumulator</td></tr>
      <tr><td><a href="#PHP" title="instruction details for PHP...">PHP</a></td><td aria-hidden="true">....</td><td>push processor status (SR)</td></tr>
      <tr><td><a href="#PLA" title="instruction details for PLA...">PLA</a></td><td aria-hidden="true">....</td><td>pull accumulator</td></tr>
      <tr><td><a href="#PLP" title="instruction details for PLP...">PLP</a></td><td aria-hidden="true">....</td><td>pull processor status (SR)</td></tr>
      <tr><td><a href="#ROL" title="instruction details for ROL...">ROL</a></td><td aria-hidden="true">....</td><td>rotate left</td></tr>
      <tr><td><a href="#ROR" title="instruction details for ROR...">ROR</a></td><td aria-hidden="true">....</td><td>rotate right</td></tr>
      <tr><td><a href="#RTI" title="instruction details for RTI...">RTI</a></td><td aria-hidden="true">....</td><td>return from interrupt</td></tr>
      <tr><td><a href="#RTS" title="instruction details for RTS...">RTS</a></td><td aria-hidden="true">....</td><td>return from subroutine</td></tr>
      <tr><td><a href="#SBC" title="instruction details for SBC...">SBC</a></td><td aria-hidden="true">....</td><td>subtract with carry</td></tr>
      <tr><td><a href="#SEC" title="instruction details for SEC...">SEC</a></td><td aria-hidden="true">....</td><td>set carry</td></tr>
      <tr><td><a href="#SED" title="instruction details for SED...">SED</a></td><td aria-hidden="true">....</td><td>set decimal</td></tr>
      <tr><td><a href="#SEI" title="instruction details for SEI...">SEI</a></td><td aria-hidden="true">....</td><td>set interrupt disable</td></tr>
      <tr><td><a href="#STA" title="instruction details for STA...">STA</a></td><td aria-hidden="true">....</td><td>store accumulator</td></tr>
      <tr><td><a href="#STX" title="instruction details for STX...">STX</a></td><td aria-hidden="true">....</td><td>store X</td></tr>
      <tr><td><a href="#STY" title="instruction details for STY...">STY</a></td><td aria-hidden="true">....</td><td>store Y</td></tr>
      <tr><td><a href="#TAX" title="instruction details for TAX...">TAX</a></td><td aria-hidden="true">....</td><td>transfer accumulator to X</td></tr>
      <tr><td><a href="#TAY" title="instruction details for TAY...">TAY</a></td><td aria-hidden="true">....</td><td>transfer accumulator to Y</td></tr>
      <tr><td><a href="#TSX" title="instruction details for TSX...">TSX</a></td><td aria-hidden="true">....</td><td>transfer stack pointer to X</td></tr>
      <tr><td><a href="#TXA" title="instruction details for TXA...">TXA</a></td><td aria-hidden="true">....</td><td>transfer X to accumulator</td></tr>
      <tr><td><a href="#TXS" title="instruction details for TXS...">TXS</a></td><td aria-hidden="true">....</td><td>transfer X to stack pointer</td></tr>
      <tr><td><a href="#TYA" title="instruction details for TYA...">TYA</a></td><td aria-hidden="true">....</td><td>transfer Y to accumulator</td></tr>
      </table>
      </p>

      <p>&nbsp;</p>
      <p>Registers:</p>
      <table id="registers" aria-label="table of registers and their verbous names">
      <tr><td>PC</td><td aria-hidden="true">....</td><td>program counter</td><td align="right">(16 bit)</td></tr>
      <tr><td>AC</td><td aria-hidden="true">....</td><td>accumulator</td><td align="right">(8 bit)</td></tr>
      <tr><td>X</td><td aria-hidden="true">....</td><td>X register</td><td align="right">(8 bit)</td></tr>
      <tr><td>Y</td><td aria-hidden="true">....</td><td>Y register</td><td align="right">(8 bit)</td></tr>
      <tr><td>SR</td><td aria-hidden="true">....</td><td>status register [NV-BDIZC]</td><td align="right">(8 bit)</td></tr>
      <tr><td>SP</td><td >....</td><td>stack pointer</td><td align="right">(8 bit)</td></tr>
      </table>

      <p>&nbsp;<br >SR Flags (bit 7 to bit 0):</p>
      <table id="flags" aria-label="table of status register flags and their verbous names">
      <td>N</td><td aria-hidden="true">....</td><td>Negative</td></tr>
      <td>V</td><td aria-hidden="true">....</td><td>Overflow</td></tr>
      <td>-</td><td aria-hidden="true">....</td><td>ignored</td></tr>
      <td>B</td><td aria-hidden="true">....</td><td>Break</td></tr>
      <td>D</td><td aria-hidden="true">....</td><td>Decimal (use BCD for arithmetics)</td></tr>
      <td>I</td><td aria-hidden="true">....</td><td>Interrupt (IRQ disable)</td></tr>
      <td>Z</td><td aria-hidden="true">....</td><td>Zero</td></tr>
      <td>C</td><td aria-hidden="true">....</td><td>Carry</td></tr>
      </table>

      <p>&nbsp</p>
      <p>Processor Stack:<br />
      LIFO, top down, 8 bit range, 0x0100 - 0x01FF<br />&nbsp;</p>

      <p>Bytes, Words, Addressing:<br />
      8 bit bytes, 16 bit words in lobyte-hibyte representation (Little-Endian).<br />
      16 bit address range, operands follow instruction codes.</p>

      <p>Signed values are two's complement, sign in bit 7 (most significant bit).<br />
      (%11111111 = $FF = -1, %10000000 = $80 = -128, %01111111 = $7F = +127)<br />&nbsp;</p>

      <p>Vendor:<br />
      MOS Technology, 1975</p>

      <figure>
      <img src="res/MOS_6502AD_4585_50.png" alt="MOS Techology 6502 MPU" title="MOS Techology 6502 MPU" width="400" height="144" style="width: 250px; height: auto;" />
      </figure>

      <p>&nbsp;</p>

      <h2 id="details">APPENDIX A: 6502 Instructions in Detail</h2>
      <pre>
      <span class="opcode" aria-label="opcode" id="ADC">ADC</span>  Add Memory to Accumulator with Carry

           A + M + C -&gt; A, C                N Z C I D V
                                            + + + - - +

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     ADC #oper     69    2     2
           zeropage      ADC oper      65    2     3
           zeropage,X    ADC oper,X    75    2     4
           absolute      ADC oper      6D    3     4
           absolute,X    ADC oper,X    7D    3     4*
           absolute,Y    ADC oper,Y    79    3     4*
           (indirect,X)  ADC (oper,X)  61    2     6
           (indirect),Y  ADC (oper),Y  71    2     5*


      <span class="opcode" aria-label="opcode" id="AND">AND</span>  AND Memory with Accumulator

           A AND M -&gt; A                     N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     AND #oper     29    2     2
           zeropage      AND oper      25    2     3
           zeropage,X    AND oper,X    35    2     4
           absolute      AND oper      2D    3     4
           absolute,X    AND oper,X    3D    3     4*
           absolute,Y    AND oper,Y    39    3     4*
           (indirect,X)  AND (oper,X)  21    2     6
           (indirect),Y  AND (oper),Y  31    2     5*


      <span class="opcode" aria-label="opcode" id="ASL">ASL</span>  Shift Left One Bit (Memory or Accumulator)

           C &lt;- [76543210] &lt;- 0             N Z C I D V
                                            + + + - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           accumulator   ASL A         0A    1     2
           zeropage      ASL oper      06    2     5
           zeropage,X    ASL oper,X    16    2     6
           absolute      ASL oper      0E    3     6
           absolute,X    ASL oper,X    1E    3     7


      <span class="opcode" aria-label="opcode" id="BCC">BCC</span>  Branch on Carry Clear

           branch on C = 0                  N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           relative      BCC oper      90    2     2**


      <span class="opcode" aria-label="opcode" id="BCS">BCS</span>  Branch on Carry Set

           branch on C = 1                  N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           relative      BCS oper      B0    2     2**


      <span class="opcode" aria-label="opcode" id="BEQ">BEQ</span>  Branch on Result Zero

           branch on Z = 1                  N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           relative      BEQ oper      F0    2     2**


      <span class="opcode" aria-label="opcode" id="BIT">BIT</span>  Test Bits in Memory with Accumulator

           bits 7 and 6 of operand are transfered to bit 7 and 6 of SR (N,V);
           the zeroflag is set to the result of operand AND accumulator.

           A AND M, M7 -&gt; N, M6 -&gt; V        N Z C I D V
                                           M7 + - - - M6

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           zeropage      BIT oper      24    2     3
           absolute      BIT oper      2C    3     4


      <span class="opcode" aria-label="opcode" id="BMI">BMI</span>  Branch on Result Minus

           branch on N = 1                  N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           relative      BMI oper      30    2     2**


      <span class="opcode" aria-label="opcode" id="BNE">BNE</span>  Branch on Result not Zero

           branch on Z = 0                  N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           relative      BNE oper      D0    2     2**


      <span class="opcode" aria-label="opcode" id="BPL">BPL</span>  Branch on Result Plus

           branch on N = 0                  N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           relative      BPL oper      10    2     2**


      <span class="opcode" aria-label="opcode" id="BRK">BRK</span>  Force Break

           interrupt,                       N Z C I D V
           push PC+2, push SR               - - - 1 - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       BRK           00    1     7


      <span class="opcode" aria-label="opcode" id="BVC">BVC</span>  Branch on Overflow Clear

           branch on V = 0                  N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           relative      BVC oper      50    2     2**


      <span class="opcode" aria-label="opcode" id="BVS">BVS</span>  Branch on Overflow Set

           branch on V = 1                  N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           relative      BVC oper      70    2     2**


      <span class="opcode" aria-label="opcode" id="CLC">CLC</span>  Clear Carry Flag

           0 -&gt; C                           N Z C I D V
                                            - - 0 - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       CLC           18    1     2


      <span class="opcode" aria-label="opcode" id="CLD">CLD</span>  Clear Decimal Mode

           0 -&gt; D                           N Z C I D V
                                            - - - - 0 -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       CLD           D8    1     2


      <span class="opcode" aria-label="opcode" id="CLI">CLI</span>  Clear Interrupt Disable Bit

           0 -&gt; I                           N Z C I D V
                                            - - - 0 - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       CLI           58    1     2


      <span class="opcode" aria-label="opcode" id="CLV">CLV</span>  Clear Overflow Flag

           0 -&gt; V                           N Z C I D V
                                            - - - - - 0

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       CLV           B8    1     2


      <span class="opcode" aria-label="opcode" id="CMP">CMP</span>  Compare Memory with Accumulator

           A - M                            N Z C I D V
                                            + + + - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     CMP #oper     C9    2     2
           zeropage      CMP oper      C5    2     3
           zeropage,X    CMP oper,X    D5    2     4
           absolute      CMP oper      CD    3     4
           absolute,X    CMP oper,X    DD    3     4*
           absolute,Y    CMP oper,Y    D9    3     4*
           (indirect,X)  CMP (oper,X)  C1    2     6
           (indirect),Y  CMP (oper),Y  D1    2     5*


      <span class="opcode" aria-label="opcode" id="CPX">CPX</span>  Compare Memory and Index X

           X - M                            N Z C I D V
                                            + + + - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     CPX #oper     E0    2     2
           zeropage      CPX oper      E4    2     3
           absolute      CPX oper      EC    3     4


      <span class="opcode" aria-label="opcode" id="CPY">CPY</span>  Compare Memory and Index Y

           Y - M                            N Z C I D V
                                            + + + - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     CPY #oper     C0    2     2
           zeropage      CPY oper      C4    2     3
           absolute      CPY oper      CC    3     4


      <span class="opcode" aria-label="opcode" id="DEC">DEC</span>  Decrement Memory by One

           M - 1 -&gt; M                       N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           zeropage      DEC oper      C6    2     5
           zeropage,X    DEC oper,X    D6    2     6
           absolute      DEC oper      CE    3     6
           absolute,X    DEC oper,X    DE    3     7


      <span class="opcode" aria-label="opcode" id="DEX">DEX</span>  Decrement Index X by One

           X - 1 -&gt; X                       N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       DEC           CA    1     2


      <span class="opcode" aria-label="opcode" id="DEY">DEY</span>  Decrement Index Y by One

           Y - 1 -&gt; Y                       N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       DEC           88    1     2


      <span class="opcode" aria-label="opcode" id="EOR">EOR</span>  Exclusive-OR Memory with Accumulator

           A EOR M -&gt; A                     N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     EOR #oper     49    2     2
           zeropage      EOR oper      45    2     3
           zeropage,X    EOR oper,X    55    2     4
           absolute      EOR oper      4D    3     4
           absolute,X    EOR oper,X    5D    3     4*
           absolute,Y    EOR oper,Y    59    3     4*
           (indirect,X)  EOR (oper,X)  41    2     6
           (indirect),Y  EOR (oper),Y  51    2     5*


      <span class="opcode" aria-label="opcode" id="INC">INC</span>  Increment Memory by One

           M + 1 -&gt; M                       N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           zeropage      INC oper      E6    2     5
           zeropage,X    INC oper,X    F6    2     6
           absolute      INC oper      EE    3     6
           absolute,X    INC oper,X    FE    3     7


      <span class="opcode" aria-label="opcode" id="INX">INX</span>  Increment Index X by One

           X + 1 -&gt; X                       N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       INX           E8    1     2


      <span class="opcode" aria-label="opcode" id="INY">INY</span>  Increment Index Y by One

           Y + 1 -&gt; Y                       N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       INY           C8    1     2


      <span class="opcode" aria-label="opcode" id="JMP">JMP</span>  Jump to New Location

           (PC+1) -&gt; PCL                    N Z C I D V
           (PC+2) -&gt; PCH                    - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           absolute      JMP oper      4C    3     3
           indirect      JMP (oper)    6C    3     5


      <span class="opcode" aria-label="opcode" id="JSR">JSR</span>  Jump to New Location Saving Return Address

           push (PC+2),                     N Z C I D V
           (PC+1) -&gt; PCL                    - - - - - -
           (PC+2) -&gt; PCH

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           absolute      JSR oper      20    3     6


      <span class="opcode" aria-label="opcode" id="LDA">LDA</span>  Load Accumulator with Memory

           M -&gt; A                           N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     LDA #oper     A9    2     2
           zeropage      LDA oper      A5    2     3
           zeropage,X    LDA oper,X    B5    2     4
           absolute      LDA oper      AD    3     4
           absolute,X    LDA oper,X    BD    3     4*
           absolute,Y    LDA oper,Y    B9    3     4*
           (indirect,X)  LDA (oper,X)  A1    2     6
           (indirect),Y  LDA (oper),Y  B1    2     5*


      <span class="opcode" aria-label="opcode" id="LDX">LDX</span>  Load Index X with Memory

           M -&gt; X                           N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     LDX #oper     A2    2     2
           zeropage      LDX oper      A6    2     3
           zeropage,Y    LDX oper,Y    B6    2     4
           absolute      LDX oper      AE    3     4
           absolute,Y    LDX oper,Y    BE    3     4*


      <span class="opcode" aria-label="opcode" id="LDY">LDY</span>  Load Index Y with Memory

           M -&gt; Y                           N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     LDY #oper     A0    2     2
           zeropage      LDY oper      A4    2     3
           zeropage,X    LDY oper,X    B4    2     4
           absolute      LDY oper      AC    3     4
           absolute,X    LDY oper,X    BC    3     4*


      <span class="opcode" aria-label="opcode" id="LSR">LSR</span>  Shift One Bit Right (Memory or Accumulator)

           0 -&gt; [76543210] -&gt; C             N Z C I D V
                                            0 + + - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           accumulator   LSR A         4A    1     2
           zeropage      LSR oper      46    2     5
           zeropage,X    LSR oper,X    56    2     6
           absolute      LSR oper      4E    3     6
           absolute,X    LSR oper,X    5E    3     7


      <span class="opcode" aria-label="opcode" id="NOP">NOP</span>  No Operation

           ---                              N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       NOP           EA    1     2


      <span class="opcode" aria-label="opcode" id="ORA">ORA</span>  OR Memory with Accumulator

           A OR M -&gt; A                      N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     ORA #oper     09    2     2
           zeropage      ORA oper      05    2     3
           zeropage,X    ORA oper,X    15    2     4
           absolute      ORA oper      0D    3     4
           absolute,X    ORA oper,X    1D    3     4*
           absolute,Y    ORA oper,Y    19    3     4*
           (indirect,X)  ORA (oper,X)  01    2     6
           (indirect),Y  ORA (oper),Y  11    2     5*


      <span class="opcode" aria-label="opcode" id="PHA">PHA</span>  Push Accumulator on Stack

           push A                           N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       PHA           48    1     3


      <span class="opcode" aria-label="opcode" id="PHP">PHP</span>  Push Processor Status on Stack

           push SR                          N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       PHP           08    1     3


      <span class="opcode" aria-label="opcode" id="PLA">PLA</span>  Pull Accumulator from Stack

           pull A                           N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       PLA           68    1     4


      <span class="opcode" aria-label="opcode" id="PLP">PLP</span>  Pull Processor Status from Stack

           pull SR                          N Z C I D V
                                            from stack

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       PLP           28    1     4


      <span class="opcode" aria-label="opcode" id="ROL">ROL</span>  Rotate One Bit Left (Memory or Accumulator)

           C &lt;- [76543210] &lt;- C             N Z C I D V
                                            + + + - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           accumulator   ROL A         2A    1     2
           zeropage      ROL oper      26    2     5
           zeropage,X    ROL oper,X    36    2     6
           absolute      ROL oper      2E    3     6
           absolute,X    ROL oper,X    3E    3     7


      <span class="opcode" aria-label="opcode" id="ROR">ROR</span>  Rotate One Bit Right (Memory or Accumulator)

           C -&gt; [76543210] -&gt; C             N Z C I D V
                                            + + + - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           accumulator   ROR A         6A    1     2
           zeropage      ROR oper      66    2     5
           zeropage,X    ROR oper,X    76    2     6
           absolute      ROR oper      6E    3     6
           absolute,X    ROR oper,X    7E    3     7


      <span class="opcode" aria-label="opcode" id="RTI">RTI</span>  Return from Interrupt

           pull SR, pull PC                 N Z C I D V
                                            from stack

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       RTI           40    1     6


      <span class="opcode" aria-label="opcode" id="RTS">RTS</span>  Return from Subroutine

           pull PC, PC+1 -&gt; PC              N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       RTS           60    1     6


      <span class="opcode" aria-label="opcode" id="SBC">SBC</span>  Subtract Memory from Accumulator with Borrow

           A - M - C -&gt; A                   N Z C I D V
                                            + + + - - +

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           immidiate     SBC #oper     E9    2     2
           zeropage      SBC oper      E5    2     3
           zeropage,X    SBC oper,X    F5    2     4
           absolute      SBC oper      ED    3     4
           absolute,X    SBC oper,X    FD    3     4*
           absolute,Y    SBC oper,Y    F9    3     4*
           (indirect,X)  SBC (oper,X)  E1    2     6
           (indirect),Y  SBC (oper),Y  F1    2     5*


      <span class="opcode" aria-label="opcode" id="SEC">SEC</span>  Set Carry Flag

           1 -&gt; C                           N Z C I D V
                                            - - 1 - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       SEC           38    1     2


      <span class="opcode" aria-label="opcode" id="SED">SED</span>  Set Decimal Flag

           1 -&gt; D                           N Z C I D V
                                            - - - - 1 -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       SED           F8    1     2


      <span class="opcode" aria-label="opcode" id="SEI">SEI</span>  Set Interrupt Disable Status

           1 -&gt; I                           N Z C I D V
                                            - - - 1 - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       SEI           78    1     2


      <span class="opcode" aria-label="opcode" id="STA">STA</span>  Store Accumulator in Memory

           A -&gt; M                           N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           zeropage      STA oper      85    2     3
           zeropage,X    STA oper,X    95    2     4
           absolute      STA oper      8D    3     4
           absolute,X    STA oper,X    9D    3     5
           absolute,Y    STA oper,Y    99    3     5
           (indirect,X)  STA (oper,X)  81    2     6
           (indirect),Y  STA (oper),Y  91    2     6


      <span class="opcode" aria-label="opcode" id="STX">STX</span>  Store Index X in Memory

           X -&gt; M                           N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           zeropage      STX oper      86    2     3
           zeropage,Y    STX oper,Y    96    2     4
           absolute      STX oper      8E    3     4


      <span class="opcode" aria-label="opcode" id="STY">STY</span>  Sore Index Y in Memory

           Y -&gt; M                           N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           zeropage      STY oper      84    2     3
           zeropage,X    STY oper,X    94    2     4
           absolute      STY oper      8C    3     4


      <span class="opcode" aria-label="opcode" id="TAX">TAX</span>  Transfer Accumulator to Index X

           A -&gt; X                           N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       TAX           AA    1     2


      <span class="opcode" aria-label="opcode" id="TAY">TAY</span>  Transfer Accumulator to Index Y

           A -&gt; Y                           N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       TAY           A8    1     2


      <span class="opcode" aria-label="opcode" id="TSX">TSX</span>  Transfer Stack Pointer to Index X

           SP -&gt; X                          N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       TSX           BA    1     2


      <span class="opcode" aria-label="opcode" id="TXA">TXA</span>  Transfer Index X to Accumulator

           X -&gt; A                           N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       TXA           8A    1     2


      <span class="opcode" aria-label="opcode" id="TXS">TXS</span>  Transfer Index X to Stack Register

           X -&gt; SP                          N Z C I D V
                                            - - - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       TXS           9A    1     2


      <span class="opcode" aria-label="opcode" id="TYA">TYA</span>  Transfer Index Y to Accumulator

           Y -&gt; A                           N Z C I D V
                                            + + - - - -

           addressing    assembler    opc  bytes  cyles
           --------------------------------------------
           implied       TYA           98    1     2



        *  add 1 to cycles if page boundery is crossed

        ** add 1 to cycles if branch occurs on same page
           add 2 to cycles if branch occurs to different page


           Legend to Flags:  + .... modified
                             - .... not modified
                             1 .... set
                             0 .... cleared
                            M6 .... memory bit 6
                            M7 .... memory bit 7


      Note on assembler syntax:
      Most assemblers employ "OPC *oper" for forced zeropage addressing.


      </pre>


      <h2 id="stck">Appendix B: 6502 Jump Vectors and Stack Operations</h2>

      <p>The 256 bytes processor stack of the 6502 is located at $0100 ... $01FF in<br />memory, growing down from top to bottom.<br />There are three 2-byte address locations at the very top end of the 64K address<br />space serving as jump vectors for reset/startup and interrupt operations:</p>

      <p style="margin: 1.5em 0 1.5em 1em;">$FFFA, $FFFB ... NMI (Non-Maskable Interrupt) vector<br />
      $FFFC, $FFFD ... RES (Reset) vector<br />
      $FFFE, $FFFF ... IRQ (Interrupt Request) vector</p>

      <p>At the occurrence of interrupt, the value of the program counter (PC) is put in<br />high-low order onto the stack, followed by the value currently in the status<br />register and control will be transferred to the address location found in the<br />respective interrupt vector. These are recovered from the stack at the end of<br />an interrupt routine by the RTI instruction.</p>

      <figure>
      <img src="res/mcs6502-interrupt-ops.png" alt="6502 Interrupt Operations" width="480" height="593" />
      <figcaption>(Image: MCS6502 Instruction Set Summary, MOS Technology, Inc.)</figcaption>
      </figure>

      <p>Similarly, as a JSR instruction is encountered, PC is dumped onto the stack<br />and recovered by the JSR instruction:</p>

      <figure style="margin-bottom: 3em;">
      <img src="res/mcs6502-jsr-rts-ops.png" alt="6502 Subroutine Operations" width="480" height="593" />
      <figcaption>(Image: MCS6502 Instruction Set Summary, MOS Technology, Inc.)</figcaption>
      </figure>
      <!-- 6502 REFERENCE -->

    </div>
  </section>

</div>
</body>
