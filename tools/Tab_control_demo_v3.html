<html lang="en" >
<head>
  <meta charset="UTF-8">
  <style>
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family:'Arial';
  }

  body {
    /*
    width: 100%;
    height: 100vh;
    display: flex;
    background: #76B9CE;
    overflow: hidden;
    */
  }

  #app {
    width: 350px;
    height: 350px;
    display: grid;
    /*place-items: center;*/
  }

  #app ul {
    position: relative;
    width: 350px;
    height: 30px;
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* elements */
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.65);
    box-shadow: 0 12.5px 10px rgba(0, 0, 0, 0.08), 0 100px 80px rgba(0, 0, 0, 0.03);
    overflow: hidden;
  }

  #app ul a {
    list-style: none;
    display: grid;
    place-items: center;
    /*font-family: "montserrat";*/
    color: #000;
    z-index: 10;
    cursor: pointer;
  }

  #app ul .focus-el {
    position: absolute;
    left: 0;
    top: 0;
    width: calc(100% / 4);
    height: 100%;
    border-radius: 10px;
    background: #fff;
    box-shadow: 0 12.5px 10px rgba(0, 0, 0, 0.015), 0 100px 80px rgba(0, 0, 0, 0.03);
  }

  #app ul .focus-el.el--2 {
    left: calc(-100% / 4);
  }

  .tabs > div { display:none; }
  .tabs > div.active { display:block; }

  .alltabs > a { display:none; }
  .alltabs > a.active { display:block; }

  </style>
</head>

<body>

  <table style="background:#76B9CE;border-radius:10px;">
    <tr>
      <td valign=top style="display:flex;flex-wrap:wrap;width:340px">

        <div id="app">
          <ul>
            <a id="tab0" href="#tab1">Assembler</a>
            <a id="tab0" href="#tab2">Debugger</a>
            <a id="tab0" href="#tab3">Emulator</a>
            <a id="tab0" href="#tab4">Reference</a>
            <div class="focus-el el--1"></div>
            <div class="focus-el el--2"></div>
          </ul>
        </div>

      </td>
  </tr>
  <tr>
    <td style="height:200px;vertical-align:top;background-color: #000000;">
    <!-- content -->
    <div class="tabs">
      <div id="tab1"> Tab one content </div>
      <div id="tab2"> Tab Two content </div>
      <div id="tab3" class=active> 
          Tab Three content with a <a href="#tab1">link to tab 1</a>
      </div>
      <div id="tab4"> Tab Four content </div>
    </div>
  </td>
  </tr>
</table>


<script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.1.1/gsap.min.js'></script>
<script id="rendered-js">
//console.clear();


  //////////////////////
  // FLOATING TABS    //
  //////////////////////


const liContainer = document.querySelector("ul");
const liEls       = [...document.querySelectorAll("ul a")];
const slideEl_1   = document.querySelector(".focus-el.el--1");
const slideEl_2   = document.querySelector(".focus-el.el--2");

//gsap.defaults({ ease: "ease.inOut" });

tl = gsap.timeline();
liRect = liContainer.getBoundingClientRect();
slideEl_1_DefaultWidth = slideEl_1.getBoundingClientRect().width;
slideEl_1_DefaultLeft  = slideEl_1.getBoundingClientRect().left;
slideEl_2_DefaultLeft  = slideEl_2.getBoundingClientRect().left;

startPosIndex = 1;
reachedEnd    = false;
activeIndex   = startPosIndex;
animationDuration = 0.1;

liEls.forEach((el, index) => {
  const elRect = el.getBoundingClientRect();


  el.addEventListener("mousedown", () => {

    sel_id = el.href.split("#")[1];
    switchNode('tabs',sel_id)
    //alert(sel_id)


    if (reachedEnd && index + 1 == startPosIndex) {
      tl.to(slideEl_1, animationDuration, { left: `${liRect.width}px` });
      tl.to(
      slideEl_2,
      animationDuration,
      { left: `${elRect.left - liRect.left}px` },
      `-=${animationDuration}`);

      tl.set(
      slideEl_1,
      { left: `${slideEl_1_DefaultLeft - liRect.left}px` },
      `+=${animationDuration}`);

      tl.set(
      slideEl_2,
      { left: `${slideEl_2_DefaultLeft - liRect.left}px` },
      `+=${animationDuration}`);
    }

    timesWidth = index + 1 - activeIndex + 1 <= 0 ? 1 : index + 1 - activeIndex + 1;
    activeIndex = index + 1;

    tl.to(slideEl_1, animationDuration, { width: `${timesWidth * slideEl_1_DefaultWidth}px` });
    if (index + 1 != startPosIndex || reachedEnd == false) {
      tl.to(slideEl_1, animationDuration, {
        left: `${elRect.left - liRect.left}px`,
        width: `${slideEl_1_DefaultWidth}px` });
    }

    reachedEnd = (index + 1 == liEls.length) ? true : false
  });
});


  //////////////////////
  // TAB SELECTOR     //
  //////////////////////

  function switchNode(node_name,sel_id)
    {
        var node    = document.getElementsByClassName(node_name)[0].childNodes
        for(var i=0;i<node.length;i++)
        {
            if(node[i].id)
            {
                if(node[i].id == sel_id) node[i].classList.add('active');
                else                     node[i].classList.remove('active');
            }
        }        
    }


</script>
</body>
</html>