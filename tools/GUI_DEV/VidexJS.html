<link rel="stylesheet"        href="../../res/COM_MAIN.css">
<script type="text/javascript" src="../../res/COM_MAIN.js"></script>

<script>
// extracted from HEX FIEND

var char_size = [8,16]
var APL_ROM = "00000000 00000000 00000000 00000000 FFFFFF00 00000000 00000000 00000000 000000FF FFFF0000 00000000 00000000 FFFFFFFF FFFF0000 00000000 00000000 00000000 0000FFFF FF000000 00000000 FFFFFF00 0000FFFF FF000000 00000000 000000FF FFFFFFFF FF000000 00000000 FFFFFFFF FFFFFFFF FF000000 00000000 E090E09E F00C021C 00000000 00000000 9090F090 BE080808 00000000 00000000 8080809E F0181010 00000000 00000000 88885020 3E080808 00000000 00000000 F080C09E 90181010 00000000 00000000 7080807C 121C1412 00000000 00000000 70806010 EC12120C 00000000 00000000 7080601E E404040E 00000000 00000000 00000000 00000000 00000000 00000000 08080808 08000000 00000000 00000000 00000000 0F000000 00000000 00000000 08080808 0F000000 00000000 00000000 00000000 08080808 08080808 08080808 08080808 08080808 08080808 08080808 00000000 0F080808 08080808 08080808 08080808 0F080808 08080808 08080808 00000000 F8000000 00000000 00000000 08080808 F8000000 00000000 00000000 00000000 FF000000 00000000 00000000 08080808 FF000000 00000000 00000000 00000000 F8080808 08080808 08080808 08080808 F8080808 08080808 08080808 00000000 FF080808 08080808 08080808 08080808 FF080808 08080808 08080808 00000000 00000000 00000000 00000000 22000000 00000000 00000000 00000000 30080404 04083000 00000000 00000000 00061860 18060000 00000000 00000000 06186018 06007E00 00000000 00000000 0000FE00 FE000000 00000000 00000000 00601806 18600000 00000000 00000000 3E060606 06063E00 00000000 00000000 00824428 10000000 00000000 00000000 00102844 82000000 00000000 00000000 0204FE10 FE408000 00000000 00000000 001000FE 00100000 00000000 00000000 00000000 18180810 00000000 00000000 001010FE 10100000 00000000 00000000 00000000 00181800 00000000 00000000 02040810 20408000 00000000 00000000 38448A92 A2443800 00000000 00000000 08380808 08083E00 00000000 00000000 3C42021C 20407E00 00000000 00000000 7E04081C 02423C00 00000000 00000000 040C1424 7E040400 00000000 00000000 7E407C02 02423C00 00000000 00000000 1E20407C 42423C00 00000000 00000000 7E020408 10202000 00000000 00000000 3C42423C 42423C00 00000000 00000000 3C42423E 02047800 00000000 00000000 0C102020 20100C00 00000000 00000000 3E303030 30303E00 00000000 00000000 00181800 18180810 00000000 00000000 00221408 14220000 00000000 00000000 00181800 18180000 00000000 00000000 80402010 08040200 00000000 00000000 FE000000 00000000 00000000 00000000 00006294 88946200 00000000 00000000 00001010 1010FE00 00000000 00000000 00003C42 42420000 00000000 00000000 10101010 10101C00 00000000 00000000 00003E40 78403E00 00000000 00000000 00007C04 00000000 FE000000 00000000 0000FE44 28100000 00000000 00000000 00001028 44FE0000 00000000 00000000 00001808 08080C00 00000000 00000000 00001824 18000000 00000000 00000000 18180810 00000000 00000000 00000000 7E424242 42427E00 00000000 00000000 08080808 08080800 00000000 00000000 0000FE10 10101000 00000000 00000000 00007C82 82827C00 00000000 00000000 10925438 54921000 00000000 00000000 3C42020C 10001000 00000000 00000000 00003C42 42625C40 40000000 00000000 1C101010 10101000 00000000 00000000 00006092 0C000000 00000000 00000000 08080808 2A1C0800 00000000 00000000 00004242 423C0000 00000000 00000000 00004482 92926C00 00000000 00000000 00007C02 027C0000 00000000 00000000 081C2A08 08080800 00000000 00000000 00007E80 807E0000 00000000 00000000 002040FE 40200000 00000000 00000000 0040407E 40400000 00000000 00000000 000804FE 04080000 00000000 00000000 60180618 60007E00 00000000 00000000 0000007E 00000000 00000000 00000000 10284482 44281000 00000000 00000000 18244242 7E424200 00000000 00000000 7C42427C 42427C00 00000000 00000000 1C224040 40221C00 00000000 00000000 78444242 42447800 00000000 00000000 7E404078 40407E00 00000000 00000000 7E404078 40404000 00000000 00000000 1C22404E 42221E00 00000000 00000000 4242427E 42424200 00000000 00000000 1C080808 08081C00 00000000 00000000 0E040404 04443800 00000000 00000000 42444850 68444200 00000000 00000000 40404040 40407E00 00000000 00000000 82C6AA92 82828200 00000000 00000000 4262524A 46424200 00000000 00000000 38448282 82443800 00000000 00000000 7C42427C 40404000 00000000 00000000 38448282 8A443A00 00000000 00000000 7C42427C 48444200 00000000 00000000 3C42403C 02423C00 00000000 00000000 FE101010 10101000 00000000 00000000 42424242 42423C00 00000000 00000000 82824444 28281000 00000000 00000000 82828282 92AA4400 00000000 00000000 82442810 28448200 00000000 00000000 82442810 10101000 00000000 00000000 FE040810 2040FE00 00000000 00000000 0C100830 08100C00 00000000 00000000 0002027E 02020000 00000000 00000000 3008100C 10083000 00000000 00000000 083E483C 127C1000 00000000 00000000 0000007E 02020000 00000000 00000000"
APL_ROM = APL_ROM.replace(/ /g,"");
var char_length = char_size[0]*char_size[1]/8;
var char_count = APL_ROM.length/2/char_length;

var char_data = new Uint8Array(char_count * char_length);
for(var i=0;i<APL_ROM.length;i+=2)
    char_data[i>>1] = parseInt( APL_ROM.substring(i,i+2) ,16);

oMEMGRID.line = function(start,len,step,digits)
{
    var end = start+len*step;
    for(var j=start,a=[],ii=0;j<end;j+=step) a[ii++] = this.oCOM.getHexMulti(j,digits);
    return a;
}

oMEMGRID.build_grid = function(start,len,step,cnf)
{
    if(cnf===undefined) var cnf = this.conf_grid;
    var s = "<table class=gtable style='display:inline-block;' id='gtable_"+cnf.id_prefix+"'>\n";
    var end = start+len*step;
    for(var i=start;i!=end;i+=step)
    s += "<tr><td>"+this.oCOM.getHexMulti(i,cnf.digits)+"</td>"
            +"<td id='"+cnf.id_prefix+this.line(i,cnf.columns,256,cnf.digits).join("'></td><td id='"+cnf.id_prefix)+"'></td></tr>\n";
    return s+"</table>"
}

oMEMGRID.paint_grid = function(data,cnf)
{
    for(var y=0 ; y < cnf.rows ; y++)
    {
        for(var x=0 ; x < cnf.columns ; x++)
        {
            var id = ((cnf.columns-x-1)<<8) + y;
            var idx = this.oCOM.getHexMulti(id,cnf.digits);
            var el = document.getElementById( cnf.id_prefix+idx );
            var bit = (data[(x>>3)+y] >> x) & 1

            if(bit) el.style.backgroundColor = "black"
            else el.style.backgroundColor = "white"
            //el.innerHTML = "<span class=gt>"+blk_txt[idx]+"</span>"
        }
    }
    //var idx = this.oCOM.getHexMulti(j,b[2]);
    //var el = document.getElementById(fix+idx);
}

var cnf = {id_prefix:"m",digits:4,columns:char_size[0],rows:char_size[1]};

function init()
{
    document.getElementById("output").innerHTML += 
        oMEMGRID.build_grid(0,char_size[1],1,cnf) 

    var char_i = 2;
    var char_offset = char_i * char_length;
    oMEMGRID.paint_grid(char_data.slice(char_offset,char_offset+char_length),cnf);
}

function up(el_id)
{
    var n = Number(document.getElementById(el_id).innerHTML) + 1;
    if(n>128) n = 0;
    document.getElementById(el_id).innerHTML = n;
    oMEMGRID.paint_grid(char_data.slice(n*char_length,n*char_length+char_length),cnf);
}

function dn(el_id)
{
    var n = Number(document.getElementById(el_id).innerHTML) + 1;
    if(n<0) n = 127;
    document.getElementById(el_id).innerHTML = n;
    oMEMGRID.paint_grid(char_data.slice(n*char_length,n*char_length+char_length),cnf);
}

</script>
<body onload="init()">
    <div id="output"></div>
    <button onclick="dn('char_n')" style="float:left"><</button>
    <div id="char_n" style="float:left">0</div>
    <button onclick="up('char_n')" style="float:left">></button>
</body>