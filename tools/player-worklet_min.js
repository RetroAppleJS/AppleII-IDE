class PlayerWorklet extends AudioWorkletProcessor{constructor(){super(),this.port.onmessage=this.onmessage.bind(this),this.sampleData=[],this.sampleIndex=0}onmessage(e){"append"===e.data.type&&(this.sampleData=e.data.audio.concat(this.sampleData),this.sampleIndex+=e.data.audio.length-1)}nextOutput(){let e=this.sampleData[this.sampleIndex];return this.sampleIndex>0?(this.sampleIndex--,0==this.sampleIndex&&(this.sampleData=[],this.port.postMessage({message:"empty"})),e):0}process(e,t){let s=t[0],a=s[0];for(let l=0;l<a.length;++l){let p=this.nextOutput();a[l]=p}return!0}}registerProcessor("player-worklet",PlayerWorklet);