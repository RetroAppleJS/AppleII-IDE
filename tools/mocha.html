<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Mocha Testing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="data:image/gif;base64,R0lGODdhIAAgAPAAAJp3XP39/CwAAAAAIAAgAAACXIyPqcuN4GIDUNpHr6ZVz5N5U8WJn9GZSpeq7gvHK0fXdrvcei3tPp4DMoSzzSVkISaQEabDOToqMcbklHqCRgM77hUD6WpH4RvqS9WhVCSely0smeRLdFAN6zoKADs="/>
    <!--
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAMEeAADBHgAAAgAAAAIAAABcd5oA/P39AP/wB///4Af//8fz///P8f//2Bn//5AN//8QDP//EAT//zAE//8/9n//f/5//n/+f/5//n/+f/5//n//f/5//3/+f/9//AAAP/wAAD/8AAA///////////////////3f///93///+Y////uf////H////x////8/////v///////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" />
    -->
    <link rel="stylesheet" href="../res/mocha.css" />

  </head>
  <body>
    <div id="mocha"></div>

    <script src="../res/chai.js"></script>
    <script src="../res/mocha.js"></script>

    <script class="mocha-init">
      mocha.setup('bdd');
      mocha.checkLeaks();
    </script>
    <script type="text/javascript" src="../res/ASM_core.js"></script>
    <script class="mocha-exec">

      var oASM = new ASM();
      oASM._test_exec = test_exec;
      document.write(oASM._test_exec())

      const assert = chai.assert;
      describe("ASM()",function(){

        it("nice message",function()
        {
          assert.equal('hello','hello')
        })

      })

      mocha.run();


      function test_exec()
      {
        var s = "";
        for(var i in this)
        {
          if(typeof(this[i])=="function")
          {
            var str = this[i].toString();
            var p1 = str.indexOf("(");
            var p2 = p1+str.substring(p1,str.length).indexOf(")")+1;
            
            var bTestData = this._test_data[i]!=null;
            s+=i+str.substring(p1,p2)+" "+(bTestData?"TEST DATA FOUND!":"")
            +"<br>"
            if(bTestData)
            {
              var fn = this._test_data[i];
              s+= "&nbsp;&nbsp;"+fn.length+" available tests<br>"
              for(var tst=0;tst<fn.length;tst++)
              {
                var arglist = fn[tst].in;
                for(var al=0,as="";al<arglist.length;al++)
                {
                  var thisarg = arglist[al] // detect type !

                  //if string
                  thisarg = "\""+thisarg+"\""

                  as += thisarg+",";
                }
                var f = "oASM."+i+"("+as.substring(0,as.length-1)+")"
                s+= "&nbsp;&nbsp;test"+tst+" "+f+"<br>"
              }
            }
            +"<br>"
          }

        }
        return s;
	}


    </script>
  </body>
</html>